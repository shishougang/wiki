<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>TI Filesystem OverView</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="TI Filesystem OverView"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2012-11-29T00:48+0800"/>
<meta name="author" content="Shi Shougang"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style><link rel="stylesheet" href="./assets/stylesheet.css" type="text/css"/>
<link rel="stylesheet" type="text/css" href="../../assets/stylesheet.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012  Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>
<div id="org-div-home-and-up" style="text-align:right;font-size:70%;white-space:nowrap;">
 <a accesskey="h" href="../../index.html"> UP </a>
 |
 <a accesskey="H" href="../../index.html"> HOME </a>
</div>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">TI Filesystem OverView</h1>



<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">General</a>
<ul>
<li><a href="#sec-1-1">arago main page</a></li>
<li><a href="#sec-1-2">busybox</a></li>
<li><a href="#sec-1-3">ubuntu</a></li>
<li><a href="#sec-1-4">Root File system solutions</a></li>
<li><a href="#sec-1-5">Creating a Root File System for Linux on OMAP35x</a></li>
</ul>
</li>
<li><a href="#sec-2">Modify</a>
<ul>
<li><a href="#sec-2-1">Using The Correct Console Device</a></li>
</ul>
</li>
<li><a href="#sec-3">Arago</a>
<ul>
<li><a href="#sec-3-1">Setting Up Build Environment and build</a>
<ul>
<li><a href="#sec-3-1-1">ubuntu install dependency</a></li>
<li><a href="#sec-3-1-2">Create the directory</a></li>
<li><a href="#sec-3-1-3">Clone Arago repositories</a></li>
<li><a href="#sec-3-1-4">Copy setup/config files</a></li>
<li><a href="#sec-3-1-5">Set the environment variables</a></li>
<li><a href="#sec-3-1-6">Point to CSL toolchain</a></li>
<li><a href="#sec-3-1-7">Build a minimal base filesystem</a></li>
<li><a href="#sec-3-1-8">Build a "demo" filesystem for OMAP3 EVM</a></li>
<li><a href="#sec-3-1-9">Build different kernels for supported platforms</a></li>
<li><a href="#sec-3-1-10">High-level hierarchy of arago-deploy directory</a></li>
<li><a href="#sec-3-1-11">Build individual package recipes</a></li>
<li><a href="#sec-3-1-12">build a native compiler (on dm8168) using</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-4">Build a File system</a>
<ul>
<li><a href="#sec-4-1">Setting up the build environment</a></li>
<li><a href="#sec-4-2">Configure the File system</a></li>
<li><a href="#sec-4-3">Create the tasks <code>task-gnuradio-toolchain-target</code> and <code>task-usrp-embedded</code></a></li>
<li><a href="#sec-4-4">Build the dm816x</a></li>
<li><a href="#sec-4-5">Debug the error</a>
<ul>
<li><a href="#sec-4-5-1">Guild</a></li>
<li><a href="#sec-4-5-2">net-tools</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-5">Host and Target</a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">General</h2>
<div class="outline-text-2" id="text-1">


</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1">arago main page</h3>
<div class="outline-text-3" id="text-1-1">

<p><a href="http://arago-project.org/wiki/index.php/Main_Page">http://arago-project.org/wiki/index.php/Main_Page</a>
</p></div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2">busybox</h3>
<div class="outline-text-3" id="text-1-2">

<p><a href="http://www.busybox.net/">http://www.busybox.net/</a>
</p></div>

</div>

<div id="outline-container-1-3" class="outline-3">
<h3 id="sec-1-3">ubuntu</h3>
<div class="outline-text-3" id="text-1-3">

<p><a href="https://wiki.ubuntu.com/ARM/RootfsFromScratch">https://wiki.ubuntu.com/ARM/RootfsFromScratch</a>
</p></div>

</div>

<div id="outline-container-1-4" class="outline-3">
<h3 id="sec-1-4">Root File system solutions</h3>
<div class="outline-text-3" id="text-1-4">

<p><a href="http://processors.wiki.ti.com/index.php/Linux_Toolchain#Root_File_System_solutions">http://processors.wiki.ti.com/index.php/Linux_Toolchain#Root_File_System_solutions</a>
</p>
</div>

</div>

<div id="outline-container-1-5" class="outline-3">
<h3 id="sec-1-5">Creating a Root File System for Linux on OMAP35x</h3>
<div class="outline-text-3" id="text-1-5">

<p><a href="http://processors.wiki.ti.com/index.php/Creating_a_Root_File_System_for_Linux_on_OMAP35x">http://processors.wiki.ti.com/index.php/Creating_a_Root_File_System_for_Linux_on_OMAP35x</a>
</p></div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Modify</h2>
<div class="outline-text-2" id="text-2">


</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1">Using The Correct Console Device</h3>
<div class="outline-text-3" id="text-2-1">

<p> update the <code>/etc/inittab</code> file in the filesystem used for kernel 
</p>


<pre class="src src-sh">S:2345:respawn:/sbin/getty 115200 ttyS2
by,
S:2345:respawn:/sbin/getty 115200 ttyO2
</pre>


</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><a name="arago-set-up" id="arago-set-up"></a>Arago</h2>
<div class="outline-text-2" id="text-3">


</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1">Setting Up Build Environment and build</h3>
<div class="outline-text-3" id="text-3-1">


</div>

<div id="outline-container-3-1-1" class="outline-4">
<h4 id="sec-3-1-1">ubuntu install dependency</h4>
<div class="outline-text-4" id="text-3-1-1">




<pre class="src src-sh">sudo apt-get install diffstat texi2html chrpath subversion python-psyco 
</pre>

</div>

</div>

<div id="outline-container-3-1-2" class="outline-4">
<h4 id="sec-3-1-2">Create the directory</h4>
<div class="outline-text-4" id="text-3-1-2">

<p>Create a new directory for the build environment:
</p>


<pre class="src src-sh">$ mkdir $<span style="color: #eedd82;">HOME</span>/oe
$ cd $<span style="color: #eedd82;">HOME</span>/oe
</pre>

</div>

</div>

<div id="outline-container-3-1-3" class="outline-4">
<h4 id="sec-3-1-3">Clone Arago repositories</h4>
<div class="outline-text-4" id="text-3-1-3">

<p>Now check out the following repositories:
</p>


<pre class="src src-sh">$ git clone git://arago-project.org/git/arago.git
$ git clone git://arago-project.org/git/arago-oe-dev.git
$ git clone git://arago-project.org/git/arago-bitbake.git
</pre>

<p>
The directory should now be populated with 3 subdirectories – <code>arago</code>, <code>arago-oe-dev</code> and <code>arago-bitbake</code>.
</p></div>

</div>

<div id="outline-container-3-1-4" class="outline-4">
<h4 id="sec-3-1-4">Copy setup/config files</h4>
<div class="outline-text-4" id="text-3-1-4">

<p>Arago repository comes with samples of arago/setenv and
arago/conf/local.conf files, which you can use as a starting point, by
copying them into their actual names (without .sample extension) and
modifying to suit your needs:
</p>


<pre class="src src-s">$ cp arago/setenv.sample arago/setenv
$ cp arago/conf/local.conf.sample arago/conf/local.conf
</pre>


<ul>
<li>File: <code>arago/setenv</code>
  Edit <code>arago/setenv</code> file and make sure environment variables are set
  properly. OEBASE should point to the directory you’ve created in the
  beginning:
</li>
</ul>




<pre class="src src-sh"><span style="color: #b0c4de;">export</span> <span style="color: #eedd82;">OEBASE</span>=$<span style="color: #eedd82;">HOME</span>/oe
</pre>

<ul>
<li>File: <code>arago/setenv</code>
  Also, in order to use a separate "scratch" area outside of home
  directory, you may want to enable SCRATCH variable and point it
  appropriately:
</li>
</ul>




<pre class="src src-sh"><span style="color: #b0c4de;">export</span> <span style="color: #eedd82;">SCRATCH</span>=/sim/scratch_AID
</pre>


</div>

</div>

<div id="outline-container-3-1-5" class="outline-4">
<h4 id="sec-3-1-5">Set the environment variables</h4>
<div class="outline-text-4" id="text-3-1-5">




<pre class="src src-sh">$ . arago/seten
</pre>

<p>
Or, 
</p>


<pre class="src src-sh">$ source arago/setenv
</pre>

</div>

</div>

<div id="outline-container-3-1-6" class="outline-4">
<h4 id="sec-3-1-6">Point to CSL toolchain</h4>
<div class="outline-text-4" id="text-3-1-6">

<p>If not done before, set the PATH variable to point to the CodeSourcery
toolchain (refer to <a href="http://www.mentor.com/embedded-software/codesourcery">Getting CodeSourcery Toolchain</a>(<a href="http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/lite/?cmpid=7108&amp;lite=arm&amp;target_os=GNU/Linux&amp;target_arch=ARM&amp;returnURL=https%3A%2F%2Fsourcery.mentor.com%2FGNUToolchain%2Frelease858%3Flite%3Darm%26cmpid%3D7108">The binary distribution for 2009q1-203 version</a>) for obtaining one):
</p>



<pre class="src src-sh">$ export <span style="color: #eedd82;">PATH</span>=/opt/arm-2009q1/bin:$<span style="color: #eedd82;">PATH</span>
</pre>


</div>

</div>

<div id="outline-container-3-1-7" class="outline-4">
<h4 id="sec-3-1-7">Build a minimal base filesystem</h4>
<div class="outline-text-4" id="text-3-1-7">

<p>Now it should be ready to start a build of the minimal filesystem
image:
</p>


<pre class="src src-sh">$ bitbake arago-base-image
</pre>

</div>

</div>

<div id="outline-container-3-1-8" class="outline-4">
<h4 id="sec-3-1-8">Build a "demo" filesystem for OMAP3 EVM</h4>
<div class="outline-text-4" id="text-3-1-8">




<pre class="src src-sh">$ <span style="color: #eedd82;">MACHINE</span>=omap3evm bitbake arago-console-image
</pre>

</div>

</div>

<div id="outline-container-3-1-9" class="outline-4">
<h4 id="sec-3-1-9">Build different kernels for supported platforms</h4>
<div class="outline-text-4" id="text-3-1-9">




<pre class="src src-sh">$ <span style="color: #eedd82;">MACHINE</span>=omap3evm bitbake virtual/kernel
$ <span style="color: #eedd82;">MACHINE</span>=beagleboard bitbake virtual/kernel
$ <span style="color: #eedd82;">MACHINE</span>=dm6446-evm bitbake virtual/kernel
$ <span style="color: #eedd82;">MACHINE</span>=dm355-evm bitbake virtual/kernel
</pre>

</div>

</div>

<div id="outline-container-3-1-10" class="outline-4">
<h4 id="sec-3-1-10">High-level hierarchy of arago-deploy directory</h4>
<div class="outline-text-4" id="text-3-1-10">

<p>Resulting images and packages will be placed under <code>arago-deploy</code>
directory - <code>images</code> for the filesystem, kernel and bootloader; and <code>ipk</code>
for binary IPK packages, respectively.
</p>



<pre class="src src-sh">arago-deploy
|-- images
|   |-- arago
|   |-- dm355-evm
|   |-- dm6446-evm
|   <span style="color: #fa8072;">`-- omap3evm</span>
<span style="color: #fa8072;">|-- ipk</span>
<span style="color: #fa8072;">|   |-- all</span>
<span style="color: #fa8072;">|   |-- arago</span>
<span style="color: #fa8072;">|   |-- armv5te</span>
<span style="color: #fa8072;">|   |-- armv7a</span>
<span style="color: #fa8072;">|   |-- dm355-evm</span>
<span style="color: #fa8072;">|   |-- dm6446-evm</span>
<span style="color: #fa8072;">|   |-- i686</span>
<span style="color: #fa8072;">|   |-- i686-armv5te-sdk</span>
<span style="color: #fa8072;">|   |-- i686-armv7a-sdk</span>
<span style="color: #fa8072;">|   `</span>-- omap3evm
<span style="color: #fa8072;">`-- sdk</span>
</pre>


</div>

</div>

<div id="outline-container-3-1-11" class="outline-4">
<h4 id="sec-3-1-11">Build individual package recipes</h4>
<div class="outline-text-4" id="text-3-1-11">

<p>You can also look in <code>oe/arago/recipes</code> for individual package recipes
that you can bitbake. For example:
</p>


<pre class="src src-sh">bitbake curl
bitbake thhtpd
</pre>


</div>

</div>

<div id="outline-container-3-1-12" class="outline-4">
<h4 id="sec-3-1-12">build a native compiler (on dm8168) using</h4>
<div class="outline-text-4" id="text-3-1-12">




<pre class="src src-sh"><span style="color: #eedd82;">MACHINE</span>=c6a816x-evm ./arago-bitbake/bin/bitbake gcc-4.3.3(since codesourcery is using 4.3.3) or
<span style="color: #eedd82;">MACHINE</span>=c6a816x-evm ./arago-bitbake/bin/bitbake task-sdk-native
</pre>

</div>
</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">Build a File system</h2>
<div class="outline-text-2" id="text-4">


</div>

<div id="outline-container-4-1" class="outline-3">
<h3 id="sec-4-1">Setting up the build environment</h3>
<div class="outline-text-3" id="text-4-1">

<p>setting up the build environment as <a href="#sec-3">Setting Up Build Environment</a>
</p></div>

</div>

<div id="outline-container-4-2" class="outline-3">
<h3 id="sec-4-2">Configure the File system</h3>
<div class="outline-text-3" id="text-4-2">

<p>File: <code>/home/testbed/oe/arago/recipes/images</code>
</p>
<p>
Use a existing file for a template 
</p>


<pre class="src src-sh">cp arago-base-tisdk-image.bb arago-base-sdr-image.bb
</pre>

<p>
And modify it to:
</p>


<pre class="src src-sh"><span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">File: arago-base-sdr-image.bb</span>
require arago-image.inc
<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">inherit tisdk-image</span>

<span style="color: #eedd82;">COMPATIBLE_MACHINE</span> = <span style="color: #ffa07a;">"omap3|ti816x|dm365|omapl138|ti814x|omap4|ti33x"</span>

<span style="color: #eedd82;">IMAGE_INSTALL</span> += <span style="color: #ffa07a;">"\</span>
<span style="color: #ffa07a;">    task-arago-base \</span>
<span style="color: #ffa07a;">    task-arago-extras \</span>
<span style="color: #ffa07a;">    task-arago-console \</span>
<span style="color: #ffa07a;">    task-arago-toolchain-base-tisdk-target \</span>
<span style="color: #ffa07a;">    task-arago-toolchain-target \</span>
<span style="color: #ffa07a;">    task-proper-tools \</span>
<span style="color: #ffa07a;">    task-base \</span>
<span style="color: #ffa07a;">    task-gnuradio-toolchain-target \</span>
<span style="color: #ffa07a;">    task-usrp-embedded \</span>
<span style="color: #ffa07a;">    "</span>

<span style="color: #b0c4de;">export</span> <span style="color: #eedd82;">IMAGE_BASENAME</span> = <span style="color: #ffa07a;">"arago-base-sdr-image"</span>
</pre>


</div>

</div>

<div id="outline-container-4-3" class="outline-3">
<h3 id="sec-4-3">Create the tasks <code>task-gnuradio-toolchain-target</code> and <code>task-usrp-embedded</code></h3>
<div class="outline-text-3" id="text-4-3">

<ul>
<li>File: <code>/home/testbed/oe/arago/recipes/tasks/task-gnuradio-toolchain-target</code>
</li>
</ul>




<pre class="src src-sh"><span style="color: #eedd82;">DESCRIPTION</span> = <span style="color: #ffa07a;">"Target packages for GNURadio SDK"</span>
<span style="color: #eedd82;">LICENSE</span> = <span style="color: #ffa07a;">"MIT"</span>
<span style="color: #eedd82;">ALLOW_EMPTY</span> = <span style="color: #ffa07a;">"1"</span>

<span style="color: #eedd82;">DEPENDS</span> = <span style="color: #ffa07a;">"task-sdk-bare"</span>

RDEPENDS_${<span style="color: #eedd82;">PN</span>} += <span style="color: #ffa07a;">" \</span>
<span style="color: #ffa07a;">    task-sdk-bare \</span>
<span style="color: #ffa07a;">    glibc \</span>
<span style="color: #ffa07a;">    virtual-libc-dev \</span>
<span style="color: #ffa07a;">    libgcc \</span>
<span style="color: #ffa07a;">    alsa-dev \</span>
<span style="color: #ffa07a;">    audiofile-dev \</span>
<span style="color: #ffa07a;">    bluez-libs-dev \</span>
<span style="color: #ffa07a;">    dbus-dev \</span>
<span style="color: #ffa07a;">    expat-dev \</span>
<span style="color: #ffa07a;">    glib-2.0-dev \</span>
<span style="color: #ffa07a;">    libice-dev \</span>
<span style="color: #ffa07a;">    jpeg-dev \</span>
<span style="color: #ffa07a;">    libapm-dev \</span>
<span style="color: #ffa07a;">    alsa-lib-dev \</span>
<span style="color: #ffa07a;">    libetpan-dev \</span>
<span style="color: #ffa07a;">    libgcrypt-dev \</span>
<span style="color: #ffa07a;">    gnutls-dev \</span>
<span style="color: #ffa07a;">    libidl-dev \</span>
<span style="color: #ffa07a;">    libiw-dev \</span>
<span style="color: #ffa07a;">    libmimedir-dev \</span>
<span style="color: #ffa07a;">    libpcap-dev \</span>
<span style="color: #ffa07a;">    libpng-dev \</span>
<span style="color: #ffa07a;">    libschedule-dev \</span>
<span style="color: #ffa07a;">    libsm-dev \</span>
<span style="color: #ffa07a;">    libsoundgen-dev \</span>
<span style="color: #ffa07a;">    libsoup-dev \</span>
<span style="color: #ffa07a;">    libsvg-dev \</span>
<span style="color: #ffa07a;">    libtododb-dev \</span>
<span style="color: #ffa07a;">    libts-dev \</span>
<span style="color: #ffa07a;">    libxml2-dev \</span>
<span style="color: #ffa07a;">    ncurses-dev \</span>
<span style="color: #ffa07a;">    popt-dev \</span>
<span style="color: #ffa07a;">    readline-dev \</span>
<span style="color: #ffa07a;">    zlib-dev \</span>
<span style="color: #ffa07a;">    ${GNURADIO_PKGS} \</span>
<span style="color: #ffa07a;">"</span>

<span style="color: #eedd82;">GNURADIO_PKGS</span> = <span style="color: #ffa07a;">" \</span>
<span style="color: #ffa07a;">    libusb1-dev \</span>
<span style="color: #ffa07a;">    guile-dev \</span>
<span style="color: #ffa07a;">    fftwf-dev \</span>
<span style="color: #ffa07a;">    alsa-dev \</span>
<span style="color: #ffa07a;">    alsa-lib-dev \</span>
<span style="color: #ffa07a;">    jack-dev \</span>
<span style="color: #ffa07a;">    cppunit-dev \</span>
<span style="color: #ffa07a;">    python-dev \</span>
<span style="color: #ffa07a;">    python-numpy-dev \</span>
<span style="color: #ffa07a;">    boost-dev \</span>
<span style="color: #ffa07a;">    gsl-dev \</span>
<span style="color: #ffa07a;">"</span>
</pre>


<ul>
<li>File: <code>/home/testbed/oe/arago/recipes/tasks/task-usrp-embedded</code>
</li>
</ul>




<pre class="src src-sh"><span style="color: #eedd82;">DESCRIPTION</span> = <span style="color: #ffa07a;">"Base software to install on USRP Embedded"</span>

<span style="color: #eedd82;">PR</span> = <span style="color: #ffa07a;">"r8"</span>

inherit task

RDEPENDS_${<span style="color: #eedd82;">PN</span>} = <span style="color: #ffa07a;">"\</span>
<span style="color: #ffa07a;">  cpufrequtils \</span>
<span style="color: #ffa07a;">  ethtool \</span>
<span style="color: #ffa07a;">  kernel-modules \</span>
<span style="color: #ffa07a;">  oprofile \</span>
<span style="color: #ffa07a;">  screen \</span>
<span style="color: #ffa07a;">  htop \</span>
<span style="color: #ffa07a;">  powertop \</span>
<span style="color: #ffa07a;">  orc \</span>
<span style="color: #ffa07a;">  python-lxml \</span>
<span style="color: #ffa07a;">  python-subprocess \</span>
<span style="color: #ffa07a;">  python-ctypes \</span>
<span style="color: #ffa07a;">  gdb \</span>
<span style="color: #ffa07a;">  vim-vimrc \</span>
<span style="color: #ffa07a;">"</span>
</pre>


<ul>
<li>File: <code>/home/testbed/oe/arago-oe-dev/recipes/tasks/task-sdk-native.bb</code>
</li>
</ul>




<pre class="src src-sh">require task-sdk-native.inc

<span style="color: #eedd82;">PR</span> = <span style="color: #ffa07a;">"${INC_PR}.1"</span>
</pre>


<ul>
<li>File: <code>/home/testbed/oe/arago-oe-dev/recipes/tasks/task-sdk-native.inc</code>
</li>
</ul>




<pre class="src src-sh"><span style="color: #eedd82;">DESCRIPTION</span> = <span style="color: #ffa07a;">"Packages required for native (on-device) SDK"</span>
<span style="color: #eedd82;">LICENSE</span> = <span style="color: #ffa07a;">"MIT"</span>
<span style="color: #eedd82;">INC_PR</span> = <span style="color: #ffa07a;">"r13"</span>

inherit task

RPROVIDES_${<span style="color: #eedd82;">PN</span>} = <span style="color: #ffa07a;">"task-native-sdk"</span>
RDEPENDS_${<span style="color: #eedd82;">PN</span>} = <span style="color: #ffa07a;">"gcc-symlinks g++-symlinks cpp cpp-symlinks binutils-symlinks \</span>
<span style="color: #ffa07a;">            make virtual-libc-dev \</span>
<span style="color: #ffa07a;">            task-proper-tools perl-modules flex flex-dev bison gawk sed grep autoconf automake make \</span>
<span style="color: #ffa07a;">            patch patchutils diffstat diffutils libstdc++-dev \</span>
<span style="color: #ffa07a;">            libtool libtool-dev libltdl-dev pkgconfig"</span>

RRECOMMENDS_${<span style="color: #eedd82;">PN</span>} = <span style="color: #ffa07a;">" g77-symlinks gfortran-symlinks cvs"</span>
</pre>


<ul>
<li>File: <code>/home/testbed/oe/arago-oe-dev/recipes/tasks/task-sdk-gnuradio-native.bb</code>
</li>
</ul>




<pre class="src src-sh">require task-sdk-native.inc

<span style="color: #eedd82;">DEPENDS</span> += <span style="color: #ffa07a;">"libusb1 guile fftw python alsa-lib jack boost cppunit swig \</span>
<span style="color: #ffa07a;">            python python-numpy git util-linux-ng gsl python-cheetah git \</span>
<span style="color: #ffa07a;">            libdbd-sqlite-perl libdbix-simple-perl pkgconfig \</span>
<span style="color: #ffa07a;">            "</span>

RDEPENDS_${<span style="color: #eedd82;">PN</span>} += <span style="color: #ffa07a;">"libusb1-dev guile-dev fftwf-dev alsa-dev alsa-lib-dev jack-dev \</span>
<span style="color: #ffa07a;">             cppunit-dev swig python-dev python-numpy-dev python-textutils \</span>
<span style="color: #ffa07a;">             python-distutils python-re python-stringold python-lang \</span>
<span style="color: #ffa07a;">             python-threading python-unittest python-shell python-pickle \</span>
<span style="color: #ffa07a;">             python-pprint python-compiler python-pkgutil python-pydoc \</span>
<span style="color: #ffa07a;">             python-mmap python-netclient python-difflib python-compile \</span>
<span style="color: #ffa07a;">             python-cheetah python-netserver python-xml cmake \</span>
<span style="color: #ffa07a;">             boost boost-dev gsl-dev git pkgconfig-dev \</span>
<span style="color: #ffa07a;">             util-linux-ng util-linux-ng-swaponoff \</span>
<span style="color: #ffa07a;">             "</span>

RPROVIDES_${<span style="color: #eedd82;">PN</span>} = <span style="color: #ffa07a;">"task-native-gnuradio-sdk"</span>

<span style="color: #eedd82;">PR</span> = <span style="color: #ffa07a;">"${INC_PR}.17"</span>

<span style="color: #eedd82;">ALLOW_EMPTY</span> = <span style="color: #ffa07a;">"1"</span>
<span style="color: #eedd82;">PACKAGES</span> = <span style="color: #ffa07a;">"${PN}"</span>
</pre>



</div>

</div>

<div id="outline-container-4-4" class="outline-3">
<h3 id="sec-4-4">Build the dm816x</h3>
<div class="outline-text-3" id="text-4-4">




<pre class="src src-sh"><span style="color: #b0c4de;">source</span> ~/oe/arago/setenv
<span style="color: #eedd82;">MACHINE</span>=dm816x-evm bitbake arago-base-sdr-image
</pre>

</div>

</div>

<div id="outline-container-4-5" class="outline-3">
<h3 id="sec-4-5">Debug the error</h3>
<div class="outline-text-3" id="text-4-5">


</div>

<div id="outline-container-4-5-1" class="outline-4">
<h4 id="sec-4-5-1">Guild</h4>
<div class="outline-text-4" id="text-4-5-1">

<ul>
<li>error



<pre class="src src-sh">| checking whether a program can dlopen itself... cross
| checking whether stripping libraries is possible... yes
| checking if libtool supports shared libraries... yes
| checking whether to build shared libraries... yes
| checking whether to build static libraries... yes
| checking for lt_dlinit<span style="color: #00ffff;"> in</span> -lltdl... no
| configure: error: libltdl not found.  See README.
| ERROR: Function do_configure failed
NOTE: package guile-1.8.7-r1: task do_configure: Failed
ERROR: TaskFailed event exception, aborting
ERROR: Build of /home/testbed/oe/arago-oe-dev/recipes/guile/guile_1.8.7.bb do_configure failed
ERROR: Task 2556 (/home/testbed/oe/arago-oe-dev/recipes/guile/guile_1.8.7.bb, do_configure) failed with exit code 1
ERROR: <span style="color: #ffa07a;">'/home/testbed/oe/arago-oe-dev/recipes/guile/guile_1.8.7.bb'</span> failed
</pre>


</li>
<li>how to

<p>
  If one manually compiles libtool (bitbake libtool), then runs
  "bitbake  guile", it compiles fine. 
</p>


<pre class="src src-sh"><span style="color: #eedd82;">MACHINE</span>=dm816x-evm bitbake libtool
<span style="color: #eedd82;">MACHINE</span>=dm816x-evm bitbake guile
<span style="color: #eedd82;">MACHINE</span>=dm816x-evm bitbake arago-base-sdr-image
</pre>

</li>
</ul>




<p class="info">FIXME: Modify the DEPENDS section 
of guile-native.inc </p>

<pre class="src src-sh">From
<span style="color: #eedd82;">DEPENDS</span> = <span style="color: #ffa07a;">"gmp-native"</span> 

to something like 

<span style="color: #eedd82;">DEPENDS</span> = <span style="color: #ffa07a;">"gmp-native libtool"</span> ? 
</pre>


</div>

</div>

<div id="outline-container-4-5-2" class="outline-4">
<h4 id="sec-4-5-2">net-tools</h4>
<div class="outline-text-4" id="text-4-5-2">

<ul>
<li>error



<pre class="src src-sh">tmp/sysroots/armv7a-none-linux-gnueabi -Wl,-O1 -Wl,--hash-style=gnu -Llib -o nameif nameif.o
| arm-none-linux-gnueabi-gcc -march=armv7-a -mtune=cortex-a8 -mfpu=neon -mfloat-abi=softfp -mthumb-interwork -mno-thumb --sysroot=/home/testbed/oe/arago-tmp/sysroots/armv7a-none-linux-gnueabi -fexpensive-optimizations -frename-registers -fomit-frame-pointer -O2 -ggdb2 -I. -idirafter ./include/ -Ilib   -c -o iptunnel.o iptunnel.c
| In file included from /home/testbed/oe/arago-tmp/sysroots/armv7a-none-linux-gnueabi/usr/include/linux/if_tunnel.h:5,
|                  from iptunnel.c:39:
| /home/testbed/oe/arago-tmp/sysroots/armv7a-none-linux-gnueabi/usr/include/linux/ip.h:85: error: redefinition of <span style="color: #ffa07a;">'struct iphdr'</span>
| make: *** [iptunnel.o] Error 1
| FATAL: oe_runmake failed
| ERROR: Function do_compile failed
NOTE: package net-tools-1.60-r3: task do_compile: Failed
ERROR: TaskFailed event exception, aborting
ERROR: Build of /home/testbed/oe/arago-oe-dev/recipes/net-tools/net-tools_1.60.bb do_compile failed
ERROR: Task 1838 (/home/testbed/oe/arago-oe-dev/recipes/net-tools/net-tools_1.60.bb, do_compile) failed with exit code 1
ERROR: <span style="color: #ffa07a;">'/home/testbed/oe/arago-oe-dev/recipes/net-tools/net-tools_1.60.bb'</span> failed
ERROR: <span style="color: #ffa07a;">'/home/testbed/oe/arago-oe-dev/recipes/net-tools/net-tools_1.60.bb'</span> failed
</pre>

</li>
<li>how to



<pre class="src src-sh">diff --git a/include/linux/if_tunnel.h b/include/linux/if_tunnel.h 
index aeab2cb..82c4362 100644 
--- a/include/linux/if_tunnel.h 
+++ b/include/linux/if_tunnel.h 
@@ -2,7 +2,10 @@ 
<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">define _IF_TUNNEL_H_ </span>

<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">include &lt;linux/types.h&gt; </span>
+ 
+#ifdef __KERNEL__ 
<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">include &lt;linux/ip.h&gt; </span>
+#endif 

<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">define SIOCGETTUNNEL (SIOCDEVPRIVATE + 0) </span>
<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">define SIOCADDTUNNEL (SIOCDEVPRIVATE + 1) </span>
</pre>

</li>
</ul>


</div>
</div>
</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5">Host and Target</h2>
<div class="outline-text-2" id="text-5">

<p>After setting up opkg respository and pointing it to apache webserver
with my vmware, now allows me easy install of python, dropbear, perl,
etc cross-complied using code sourcery.
</p>
<p class="verse">
On Host:<br/>
Install Apache sudo apt-get install apache2<br/>
After you finish building packages on host, refresh the package index on the host: &gt; bitbake package-index<br/>
add a symlink to the arago deploy/ipk directory to apache's home page <code>/var/www/oe-repo</code><br/>
<br/>
On EVM:<br/>
Determine your host IP address, and then add a src/gz  line to <code>/etc/opkg/opkg.conf</code><br/>
On the device, re-fetch the package list : opkg update<br/>
On the device, search for packages or install them<br/>
<code>opkg list '*strace*'= =opkg install strace</code><br/>
</p>

</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2012-11-29T00:48+0800</p>
<p class="author">Author: Shi Shougang</p>
<p class="creator"><a href="http://orgmode.org">Org</a> version 7.9.2+ with <a href="http://www.gnu.org/software/emacs/">Emacs</a> version 24</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
