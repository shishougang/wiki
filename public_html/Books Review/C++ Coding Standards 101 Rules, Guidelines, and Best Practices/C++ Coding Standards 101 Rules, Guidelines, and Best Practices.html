<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>C++ Coding Standards: 101 Rules, Guidelines, and Best Practices Notes</title>
<!-- 2014-06-18 Wed 22:54 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Shi Shougang" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../../assets/stylesheet.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">C++ Coding Standards: 101 Rules, Guidelines, and Best Practices Notes</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">The C++ In-Depth Series</a></li>
<li><a href="#sec-2">Acknowledgments</a></li>
<li><a href="#sec-3">0. Don't sweat the small stuff. (Or: Know what not to standardize.)</a></li>
<li><a href="#sec-4">1. Compile cleanly at high warning levels</a>
<ul>
<li><a href="#sec-4-1">Examples</a></li>
</ul>
</li>
<li><a href="#sec-5">2. Use an automated build system</a></li>
<li><a href="#sec-6">3. Use a version control system</a></li>
<li><a href="#sec-7">4. Invest in code reviews</a></li>
<li><a href="#sec-8">5. Give one entity one cohesive responsibility</a></li>
</ul>
</div>
</div>


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">The C++ In-Depth Series</h2>
<div class="outline-text-2" id="text-1">
<p>
Accelerated C++: Practical Programming by Example, Andrew Koenig and Barbara E. Moo
</p>

<p>
Applied C++: Practical Techniques for Building Better Software, Philip Romanik and Amy Muntz
</p>

<p>
The Boost Graph Library: User Guide and Reference Manual, Jeremy G. Siek, Lie-Quan Lee, and Andrew Lumsdaine
</p>

<p>
C++ Coding Standards: 101 Rules, Guidelines, and Best Practices, Herb Sutter and Andrei Alexandrescu
</p>

<p>
C++ In-Depth Box Set, Bjarne Stroustrup, Andrei Alexandrescu, Andrew Koenig, Barbara E. Moo, Stanley B. Lippman, and Herb Sutter
</p>

<p>
C++ Network Programming, Volume 1: Mastering Complexity with ACE and Patterns, Douglas C. Schmidt and Stephen D. Huston
</p>

<p>
C++ Network Programming, Volume 2: Systematic Reuse with ACE and Frameworks, Douglas C. Schmidt and Stephen D. Huston
</p>

<p>
C++ Template Metaprogramming: Concepts, Tools, and Techniques from Boost and Beyond, David Abrahams and Aleksey Gurtovoy
</p>

<p>
Essential C++, Stanley B. Lippman
</p>

<p>
Exceptional C++: 47 Engineering Puzzles, Programming Problems, and Solutions, Herb Sutter
</p>

<p>
Exceptional C++ Style: 40 New Engineering Puzzles, Programming Problems, and Solutions, Herb Sutter
</p>

<p>
Modern C++ Design: Generic Programming and Design Patterns Applied, Andrei Alexandrescu
</p>

<p>
More Exceptional C++: 40 New Engineering Puzzles, Programming Problems, and Solutions, Herb Sutter
</p>

<p>
For more information, check out the series web site at www.awprofessional.com/series/indepth/
</p>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Acknowledgments</h2>
<div class="outline-text-2" id="text-2">
<p>
Inspiration for some of the "sound bites" came from many sources,
including the playful style of [Cline99], the classic import this of
[Peters99], and the legendary and eminently quotable Alan Perlis.
</p>

<p>
[Cline99] M. Cline, G. Lomow, and M. Girou . C++ FAQs (2ndEdition)
(Addison-Wesley, 1999).
</p>

<p>
[Peters99] T. Peters . "The Zen of Python" (comp.lang.python, June
1999).
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">0. Don't sweat the small stuff. (Or: Know what not to standardize.)</h2>
<div class="outline-text-2" id="text-3">
<p>
Here are several common issues where the important thing is not to set a rule but just to be consistent with the style already in use within the file you're maintaining:
</p>

<p>
Don't specify how much to indent, but do indent to show structure: Use any number of spaces you like to indent, but be consistent within at least each file.
</p>

<p>
Don't enforce a specific line length, but do keep line lengths readable: Use any length of line you like, but don't be excessive. Studies show that up to ten-word text widths are optimal for eye tracking.
</p>

<p>
Don't overlegislate naming, but do use a consistent naming convention: There are only two must-dos: a) never use "underhanded names," ones that begin with an underscore or that contain a double underscore; and b) always use ONLY<sub>UPPERCASE</sub><sub>NAMES</sub> for macros and never think about writing a macro that is a common word or abbreviation (including common template parameters, such as T and U; writing #define T anything is extremely disruptive). Otherwise, do use consistent and meaningful names and follow a file's or module's convention. (If you can't decide on your own naming convention, try this one: Name classes, functions, and enums LikeThis; name variables likeThis; name private member variables likeThis_; and name macros LIKE<sub>THIS</sub>.)
</p>

<p>
Don't prescribe commenting styles (except where tools extract certain
styles into documentation), but do write useful comments: Write code
instead of comments where possible (e.g., see Item 16). Don't write
comments that repeat the code; they get out of sync. Do write
illuminating comments that explain approach and rationale.
</p>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">1. Compile cleanly at high warning levels</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1">Examples</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Example 1: A third-party header file. A library header file that you cannot change could contain a construct that causes (probably benign) warnings. Then wrap the file with your own version that #includes the original header and selectively turns off the noisy warnings for that scope only, and then #include your wrapper throughout the rest of your project. Example (note that the warning control syntax will vary from compiler to compiler):
</p>

<p>
<i>/ File: myproj/my<sub>lambda</sub>.h &#x2013; wraps Boost's lambda.hpp
/</i>  Always include this file; don't use lambda.hpp directly.
<i>/  NOTE: Our build now automatically checks "grep lambda.hpp &lt;srcfile&gt;".
/</i> Boost.Lambda produces noisy compiler warnings that we know are innocuous.
<i>/ When they fix it we'll remove the pragmas below, but this header will still exist.
/</i>
#pragma warning(push)     // disable for this header only
 #pragma warning(disable:4512)
 #pragma warning(disable:4180)
 #include &lt;boost/lambda/lambda.hpp&gt;
#pragma warning(pop)      // restore original warning level
</p>

<p>
Example 2: "Unused function parameter." Check to make sure you really didn't mean to use the function parameter (e.g., it might be a placeholder for future expansion, or a required part of a standardized signature that your code has no use for). If it's not needed, simply delete the name of a function parameter:
</p>

<p>
// … inside a user-defined allocator that has no use for the hint …
</p>

<p>
// warning: "unused parameter 'localityHint'"
pointer allocate( size<sub>type</sub> numObjects, const void *localityHint = 0 ) {
  return static<sub>cast</sub>&lt;pointer&gt;( mallocShared( numObjects * sizeof(T) ) );
}
</p>

<p>
<i>/ new version: eliminates warning
pointer allocate( size<sub>type</sub> numObjects, const void * /* localityHint *</i> = 0 ) {
  return static<sub>cast</sub>&lt;pointer&gt;( mallocShared( numObjects * sizeof(T) ));
}
</p>

<p>
Example 3: "Variable defined but never used." Check to make sure you really didn't mean to reference the variable. (An RAII stack-based object often causes this warning spuriously; see Item 13.) If it's not needed, often you can silence the compiler by inserting an evaluation of the variable itself as an expression (this evaluation won't impact run-time speed):
</p>

<p>
// warning: "variable 'lock' is defined but never used"
void Fun() {
 Lock lock;
</p>

<p>
// …
</p>

<p>
}
</p>

<p>
// new version: probably eliminates warning
void Fun() {
 Lock lock;
 lock;
</p>

<p>
// …
</p>

<p>
}
</p>

<p>
Example 4: "Variable may be used without being initialized." Initialize the variable (see Item 19).
</p>

<p>
Example 5: "Missing return." Sometimes the compiler asks for a return statement even though your control flow can never reach the end of the function (e.g., infinite loop, tHRow statements, other returns). This can be a good thing, because sometimes you only think that control can't run off the end. For example, switch statements that do not have a default are not resilient to change and should have a default case that does assert( false ) (see also Items 68 and 90):
</p>

<p>
// warning: missing "return"
int Fun( Color c ) {
 switch( c ) {
 case Red:   return 2;
 case Green: return 0;
 case Blue:
 case Black: return 1;
 }
}
</p>

<p>
// new version: eliminates warning
int Fun( Color c ) {
 switch( c ) {
 case Red:   return 2;
 case Green: return 0;
 case Blue:
 case Black: return 1;
 default:    assert( !"should never get here!" );   // !"string" evaluates to false
             return -1;
 }
}
</p>

<p>
Example 6: "Signed/unsigned mismatch." It is usually not necessary to
compare or assign integers with different signedness. Change the types
of the variables being compared so that the types agree. In the worst
case, insert an explicit cast. (The compiler inserts that cast for you
anyway, and warns you about doing it, so you're better off putting it
out in the open.)
</p>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">2. Use an automated build system</h2>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">3. Use a version control system</h2>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">4. Invest in code reviews</h2>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">5. Give one entity one cohesive responsibility</h2>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Shi Shougang</p>
<p class="date">Created: 2014-06-18 Wed 22:54</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.50.1 (<a href="http://orgmode.org">Org</a> mode 8.2.3a)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
