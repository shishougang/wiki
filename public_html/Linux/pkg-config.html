<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>pkg-config Notes</title>
<!-- 2014-02-04 Tue 23:37 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Shi Shougang" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../assets/stylesheet.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">pkg-config Notes</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Concepts</a></li>
<li><a href="#sec-2">Using pkg-config files</a></li>
<li><a href="#sec-3">use example</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Concepts<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup></h2>
<div class="outline-text-2" id="text-1">
<p>
The file format contains predefined metadata keywords and freeform
variables. An example may be illustrative:
</p>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #eedd82;">prefix</span>=/usr/local
<span style="color: #eedd82;">exec_prefix</span>=${<span style="color: #eedd82;">prefix</span>}
<span style="color: #eedd82;">includedir</span>=${<span style="color: #eedd82;">prefix</span>}/include
<span style="color: #eedd82;">libdir</span>=${<span style="color: #eedd82;">exec_prefix</span>}/lib

Name: foo
Description: The foo library
Version: 1.0.0
Cflags: -I${<span style="color: #eedd82;">includedir</span>}/foo
Libs: -L${<span style="color: #eedd82;">libdir</span>} -lfoo
</pre>
</div>

<p>
Here is a short description of the keyword fields. A more in depth description of these fields and how to use them effectively will be given in the Writing pkg-config files section.
</p>

<ul class="org-ul">
<li>Name: A human-readable name for the library or package. This does
not affect usage of the pkg-config tool, which uses the name of the
.pc file.
</li>
<li>Description: A brief description of the package.
</li>
<li>URL: An URL where people can get more information about and download the package.
</li>
<li>Version: A string specifically defining the version of the package.
</li>
<li>Requires: A list of packages required by this package. The versions of these packages may be specified using the comparison operators =, &lt;, &gt;, &lt;= or &gt;=.
</li>
<li>Requires.private: A list of private packages required by this package but not exposed to applications. The version specific rules from the Requires field also apply here.
</li>
<li>Conflicts: An optional field describing packages that this one conflicts with. The version specific rules from the Requires field also apply here. This field also takes multiple instances of the same package. E.g., Conflicts: bar &lt; 1.2.3, bar &gt;= 1.3.0.
</li>
<li>Cflags: The compiler flags specific to this package and any required libraries that don't support pkg-config. If the required libraries support pkg-config, they should be added to Requires or Requires.private.
</li>
<li>Libs: The link flags specific to this package and any required libraries that don't support pkg-config. The same rule as Cflags applies here.
</li>
<li>Libs.private: The link flags for private libraries required by this package but not exposed to applications. The same rule as Cflags applies here.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Using pkg-config files</h2>
<div class="outline-text-2" id="text-2">
<p>
A few autoconf macros are also provided to ease integration of pkg-config modules into projects.
</p>

<ul class="org-ul">
<li><code>PKG_PROG_PKG_CONFIG([MIN-VERSION])</code> : Locates the pkg-config tool on the system and checks the version for compatibility.
</li>
<li><code>PKG_CHECK_EXISTS(MODULES, [ACTION-IF-FOUND],
  [ACTION-IF-NOT-FOUND])</code> : Checks to see whether a particular set of
modules exists.
</li>
<li><code>PKG_CHECK_MODULES(VARIABLE-PREFIX, MODULES, [ACTION-IF-FOUND],
  [ACTION-IF-NOT-FOUND])</code> : Checks to see whether a particular set of
modules exists. If so, it sets &lt;VARIABLE-PREFIX&gt;<sub>CFLAGS</sub> and
&lt;VARIABLE-PREFIX&gt;<sub>LIBS</sub> according to the output from pkg-config
&#x2013;cflags and pkg-config &#x2013;libs.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">use example</h2>
<div class="outline-text-2" id="text-3">
<p>
My program uses library x. What do I do?
The pkg-config output can easily be used on the compiler command line.
Assuming the x library has a x.pc pkg-config file:
</p>

<div class="org-src-container">

<pre class="src src-sh">cc <span style="color: #fa8072;">`pkg-config --cflags --libs x`</span> -o myapp myapp.c
</pre>
</div>

<p>
The integration can be more robust when used with autoconf and
automake. By using the supplied <code>PKG_CHECK_MODULES</code> macro, the metadata
is easily accessed in the build process.
</p>

<div class="org-src-container">

<pre class="src src-sh">configure.ac:
<span style="color: #87cefa;">PKG_CHECK_MODULES</span>([X], [x])

Makefile.am:
<span style="color: #eedd82;">myapp_CFLAGS</span> = $(X_CFLAGS)
<span style="color: #eedd82;">myapp_LDADD</span> = $(X_LIBS)
</pre>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
<a href="http://people.freedesktop.org/~dbn/pkg-config-guide.html">http://people.freedesktop.org/~dbn/pkg-config-guide.html</a>
</p></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Shi Shougang</p>
<p class="date">Created: 2014-02-04 Tue 23:37</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.50.1 (<a href="http://orgmode.org">Org</a> mode 8.2.3a)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
