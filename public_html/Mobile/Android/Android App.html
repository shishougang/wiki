<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Android App</title>
<!-- 2014-10-05 Sun 23:28 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Shi Shougang" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../../assets/stylesheet.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Android App</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">set up development environment</a>
<ul>
<li><a href="#sec-1-1">Download the Android SDK.</a></li>
<li><a href="#sec-1-2">Install the ADT plugin for Eclipse (if you’ll use the Eclipse IDE).</a></li>
<li><a href="#sec-1-3">Download the latest SDK tools and platforms using the SDK Manager.</a></li>
<li><a href="#sec-1-4">add PATH</a></li>
</ul>
</li>
<li><a href="#sec-2">a few directories and files in the Android project</a>
<ul>
<li><a href="#sec-2-1">AndroidManifest.xml</a></li>
<li><a href="#sec-2-2">src/</a></li>
</ul>
</li>
<li><a href="#sec-3">Managing Projects</a>
<ul>
<li><a href="#sec-3-1">Android Projects</a></li>
<li><a href="#sec-3-2">Library Projects</a></li>
<li><a href="#sec-3-3">Test Projects</a></li>
</ul>
</li>
<li><a href="#sec-4">Managing the Activity Lifecycle</a>
<ul>
<li><a href="#sec-4-1">Recreating an Activity</a></li>
</ul>
</li>
<li><a href="#sec-5">Supporting Different Devices</a>
<ul>
<li><a href="#sec-5-1">Supporting Different Languages</a></li>
<li><a href="#sec-5-2">Supporting Different Screens</a></li>
<li><a href="#sec-5-3">Supporting Different Platform Versions</a></li>
</ul>
</li>
<li><a href="#sec-6">Building a Dynamic UI with Fragments</a>
<ul>
<li><a href="#sec-6-1">Using the Support Library</a></li>
<li><a href="#sec-6-2">Creating a Fragment</a></li>
<li><a href="#sec-6-3">Building a Flexible UI</a></li>
<li><a href="#sec-6-4">Communicating with Other Fragments</a></li>
</ul>
</li>
<li><a href="#sec-7">Saving Data</a>
<ul>
<li><a href="#sec-7-1">Saving Key-Value Sets</a></li>
<li><a href="#sec-7-2">Saving Files</a></li>
<li><a href="#sec-7-3">Saving Data in SQL Databases</a></li>
</ul>
</li>
<li><a href="#sec-8">Interacting with Other Apps</a>
<ul>
<li><a href="#sec-8-1">Sending the User to Another App</a></li>
<li><a href="#sec-8-2">Getting a Result from an Activity</a></li>
<li><a href="#sec-8-3">Allowing Other Apps to Start Your Activity</a></li>
</ul>
</li>
<li><a href="#sec-9">Sharing Content</a>
<ul>
<li><a href="#sec-9-1">Sending Content to Other Apps</a></li>
<li><a href="#sec-9-2">Receiving Content from Other Apps</a></li>
<li><a href="#sec-9-3">Adding an Easy Share Action</a></li>
</ul>
</li>
<li><a href="#sec-10">Managing Audio Playback</a>
<ul>
<li><a href="#sec-10-1">Controlling Your App’s Volume and Playback</a></li>
<li><a href="#sec-10-2">Managing Audio Focus</a></li>
<li><a href="#sec-10-3">Dealing with Audio Output Hardware</a></li>
</ul>
</li>
<li><a href="#sec-11">Capturing Photos</a>
<ul>
<li><a href="#sec-11-1">Taking Photos Simply</a></li>
<li><a href="#sec-11-2">Recording Videos Simply</a></li>
<li><a href="#sec-11-3">Controlling the Camera</a></li>
</ul>
</li>
<li><a href="#sec-12">Building Apps with Graphics &amp; Animation</a>
<ul>
<li><a href="#sec-12-1">Displaying Bitmaps Efficiently</a></li>
<li><a href="#sec-12-2">Displaying Graphics with OpenGL ES</a></li>
<li><a href="#sec-12-3">Adding Animations</a></li>
</ul>
</li>
<li><a href="#sec-13">Activities</a>
<ul>
<li><a href="#sec-13-1">Fragments</a></li>
<li><a href="#sec-13-2">Loaders</a></li>
<li><a href="#sec-13-3">Tasks and Back Stack</a></li>
</ul>
</li>
<li><a href="#sec-14">Providing Resources</a></li>
<li><a href="#sec-15">Handling Runtime Changes</a></li>
<li><a href="#sec-16">Localization</a></li>
<li><a href="#sec-17">Layouts</a></li>
<li><a href="#sec-18">Styles and Themes</a></li>
<li><a href="#sec-19">Data Storage</a>
<ul>
<li><a href="#sec-19-1">Storage Options</a></li>
<li><a href="#sec-19-2">Data Backup</a></li>
<li><a href="#sec-19-3">App Install Location</a></li>
</ul>
</li>
<li><a href="#sec-20">Design</a>
<ul>
<li><a href="#sec-20-1">Iconography</a></li>
</ul>
</li>
<li><a href="#sec-21">Testing</a></li>
<li><a href="#sec-22">C program using Android Toolchain</a></li>
<li><a href="#sec-23">other component</a>
<ul>
<li><a href="#sec-23-1">social</a></li>
</ul>
</li>
<li><a href="#sec-24">dd</a></li>
<li><a href="#sec-25">FAQ</a>
<ul>
<li><a href="#sec-25-1">permission denied: ant</a></li>
<li><a href="#sec-25-2">Description Resource Path Location Type Unexpected namespace prefix "xmlns" found for tag RelativeLayout activity<sub>a</sub>.xml</a></li>
</ul>
</li>
</ul>
</div>
</div>


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">set up development environment</h2>
<div class="outline-text-2" id="text-1">
<p>
<a href="http://clamel.netai.net/smartpad850i/enable_adb">http://clamel.netai.net/smartpad850i/enable_adb</a>
</p>

<p>
<a href="http://developer.android.com/tools/device.html">http://developer.android.com/tools/device.html</a>
</p>
</div>
<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">Download the Android SDK.</h3>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">Install the ADT plugin for Eclipse (if you’ll use the Eclipse IDE).</h3>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">Download the latest SDK tools and platforms using the SDK Manager.</h3>
<div class="outline-text-3" id="text-1-3">
<p>
<a href="http://developer.android.com/training/basics/firstapp/index.html">http://developer.android.com/training/basics/firstapp/index.html</a>
the ADT Bundle includes everything you need to begin developing apps:
</p>

<ul class="org-ul">
<li>Eclipse + ADT plugin
</li>
<li>Android SDK Tools
</li>
<li>Android Platform-tools
</li>
<li>The latest Android platform
</li>
<li>The latest Android system image for the emulator
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">add PATH</h3>
<div class="outline-text-3" id="text-1-4">
<p>
Add the platform-tools/ as well as the tools/ directory to your PATH
environment variable.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">a few directories and files in the Android project</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">AndroidManifest.xml</h3>
<div class="outline-text-3" id="text-2-1">
<p>
The manifest file describes the fundamental characteristics of the app
and defines each of its components. 
</p>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">src/</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Directory for your app's main source files.
</p>
</div>
<ul class="org-ul"><li>drawable-hdpi/<br  /><div class="outline-text-4" id="text-2-2-1">
<p>
Directory for drawable objects (such as bitmaps) that are designed for
high-density (hdpi) screens. Other drawable directories contain assets
designed for other screen densities.
</p>
</div>
</li>
<li>layout/<br  /><div class="outline-text-4" id="text-2-2-2">
<p>
Directory for files that define your app's user interface.
</p>
</div>
</li>

<li>values/<br  /><div class="outline-text-4" id="text-2-2-3">
<p>
Directory for other various XML files that contain a collection of
resources, such as string and color definitions.
</p>
</div>
</li></ul>
</div>
</div>



<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Managing Projects</h2>
<div class="outline-text-2" id="text-3">
<p>
<a href="http://developer.android.com/tools/projects/index.html">http://developer.android.com/tools/projects/index.html</a>
 There are three types of projects, and they all share the same
 general structure but differ in function:
</p>
<ul class="org-ul">
<li>Android Projects
</li>
<li>Test Projects
</li>
<li>Library Projects These projects contain shareable Android source
code and resources that you can reference in Android projects. This
is useful when you have common code that you want to reuse. Library
projects cannot be installed onto a device, however, they are pulled
into the .apk file at build time.
</li>
</ul>
</div>
<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">Android Projects</h3>
<div class="outline-text-3" id="text-3-1">
<p>
The following directories and files comprise an Android project:
</p>

<ul class="org-ul">
<li>src/ Contains your stub Activity file, which is stored at
src/your/package/namespace/ActivityName.java. All other source code
files (such as .java or .aidl files) go here as well.
</li>

<li>bin Output directory of the build. This is where you can find the
final .apk file and other compiled resources.
</li>

<li>jni Contains native code sources developed using the Android NDK.
For more information, see the Android NDK documentation.
</li>

<li>gen/ Contains the Java files generated by ADT, such as your R.java file and interfaces created from AIDL files.
</li>
<li>assets/ This is empty. You can use it to store raw asset files. Files that you save here are compiled into an .apk file as-is, and the original filename is preserved. You can navigate this directory in the same way as a typical file system using URIs and read files as a stream of bytes using the the AssetManager. For example, this is a good location for textures and game data.
</li>
<li>res/ Contains application resources, such as drawable files, layout files, and string values. See Application Resources for more information.
<ul class="org-ul">
<li>anim/ For XML files that are compiled into animation objects. See the Animation resource type.
</li>
<li>color/ For XML files that describe colors. See the Color Values resource type.
</li>
<li>drawable/ For bitmap files (PNG, JPEG, or GIF), 9-Patch image
files, and XML files that describe Drawable shapes or a Drawable
objects that contain multiple states (normal, pressed, or
focused). See the Drawable resource type.
</li>

<li>layout/ XML files that are compiled into screen layouts (or part of a screen). See the Layout resource type.
</li>
<li>menu/ For XML files that define application menus. See the Menus resource type.
</li>
<li>raw/ For arbitrary raw asset files. Saving asset files here instead of in the assets/ directory only differs in the way that you access them. These files are processed by aapt and must be referenced from the application using a resource identifier in the R class. For example, this is a good place for media, such as MP3 or Ogg files.
</li>
<li>values/ For XML files that are compiled into many kinds of resource. Unlike other resources in the res/ directory, resources written to XML files in this folder are not referenced by the file name. Instead, the XML element type controls how the resources is defined within them are placed into the R class.
</li>
<li>xml/ For miscellaneous XML files that configure application components. For example, an XML file that defines a PreferenceScreen, AppWidgetProviderInfo, or Searchability Metadata. See Application Resources for more information about configuring these application components.
</li>
</ul>
</li>
<li>libs/ Contains private libraries.
</li>
<li>AndroidManifest.xml The control file that describes the nature of the application and each of its components. For instance, it describes: certain qualities about the activities, services, intent receivers, and content providers; what permissions are requested; what external libraries are needed; what device features are required, what API Levels are supported or required; and others. See the AndroidManifest.xml documentation for more information
</li>
<li>project.properties This file contains project settings, such as the build target. This file is integral to the project, so maintain it in a source revision control system. To edit project properties in Eclipse, right-click the project folder and select Properties.
</li>
<li>local.properties Customizable computer-specific properties for the build system. If you use Ant to build the project, this contains the path to the SDK installation. Because the content of the file is specific to the local installation of the SDK, the local.properties should not be maintained in a source revision control system. If you use Eclipse, this file is not used.
</li>
<li>ant.properties Customizable properties for the build system. You can edit this file to override default build settings used by Ant and also provide the location of your keystore and key alias so that the build tools can sign your application when building in release mode. This file is integral to the project, so maintain it in a source revision control system. If you use Eclipse, this file is not used.
</li>
<li>build.xml The Ant build file for your project. This is only applicable for projects that you build with Ant.
</li>
</ul>
</div>
</div>



<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2">Library Projects</h3>
<div class="outline-text-3" id="text-3-2">
<p>
However, a library project differs from an standard Android
application project in that you cannot compile it directly to its own
.apk and run it on an Android device. Similarly, you cannot export the
library project to a self-contained JAR file, as you would do for a
true library. Instead, you must compile the library indirectly, by
referencing the library in the dependent application and building that
application
</p>
</div>
</div>
<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3">Test Projects</h3>
<div class="outline-text-3" id="text-3-3">
<p>
Test projects contain Android applications that you write using the
Testing and Instrumentation framework. The framework is an extension
of the JUnit test framework and adds access to Android system objects.
The file structure of a test project is the same as an Android
project.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Managing the Activity Lifecycle</h2>
<div class="outline-text-2" id="text-4">
<p>
<a href="http://developer.android.com/training/basics/activity-lifecycle/index.html">http://developer.android.com/training/basics/activity-lifecycle/index.html</a>
</p>
</div>

<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1">Recreating an Activity</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Caution: Your activity will be destroyed and recreated each time the
user rotates the screen. When the screen changes orientation, the
system destroys and recreates the foreground activity because the
screen configuration has changed and your activity might need to load
alternative resources (such as the layout).
</p>

<p>
To save additional data about the activity state, you must override
the onSaveInstanceState() callback method. The system calls this
method when the user is leaving your activity and passes it the Bundle
object that will be saved in the event that your activity is destroyed
unexpectedly. If the system must recreate the activity instance later,
it passes the same Bundle object to both the onRestoreInstanceState()
and onCreate() methods.
</p>

<p>
Instead of restoring the state during onCreate() you may choose to
implement onRestoreInstanceState(), which the system calls after the
onStart() method. The system calls onRestoreInstanceState() only if
there is a saved state to restore, so you do not need to check whether
the Bundle is null
</p>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Supporting Different Devices</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1">Supporting Different Languages</h3>
<div class="outline-text-3" id="text-5-1">
</div><ul class="org-ul"><li>Create Locale Directories and String Files<br  /><div class="outline-text-4" id="text-5-1-1">
<p>
To add support for more languages, create additional values
directories inside res/ that include a hyphen and the ISO country code
at the end of the directory name. For example, values-es/ is the
directory containing simple resourcess for the Locales with the
language code "es". Android loads the appropriate resources according
to the locale settings of the device at run time.
</p>

<p>
In your source code, you can refer to a string resource with the
syntax R.string.&lt;string<sub>name</sub>&gt;. There are a variety of methods that
accept a string resource this way.
</p>

<div class="org-src-container">

<pre class="src src-java"><span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Get a string resource from your app's Resources</span>
<span style="color: #98fb98;">String</span> <span style="color: #eedd82;">hello</span> = getResources().getString(R.string.hello_world);

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Or supply a string resource to a method that requires a string</span>
<span style="color: #98fb98;">TextView</span> <span style="color: #eedd82;">textView</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">TextView</span>(<span style="color: #00ffff;">this</span>);
textView.setText(R.string.hello_world);
</pre>
</div>

<p>
In other XML files, you can refer to a string resource with the syntax
@string/&lt;string<sub>name</sub>&gt; whenever the XML attribute accepts a string
value.
</p>

<div class="org-src-container">

<pre class="src src-sh">&lt;TextView
    android:<span style="color: #eedd82;">layout_width</span>=<span style="color: #ffa07a;">"wrap_content"</span>
    android:<span style="color: #eedd82;">layout_height</span>=<span style="color: #ffa07a;">"wrap_content"</span>
    android:<span style="color: #eedd82;">text</span>=<span style="color: #ffa07a;">"@string/hello_world"</span> /&gt;
</pre>
</div>
</div>
</li></ul>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2">Supporting Different Screens</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Android categorizes device screens using two general properties: size
and density. 
</p>


<ul class="org-ul">
<li>There are four generalized sizes: small, normal, large, xlarge
</li>
<li>And four generalized densities: low (ldpi), medium (mdpi), high
(hdpi), extra high (xhdpi)
</li>
</ul>
</div>

<ul class="org-ul"><li>Create Different Layouts<br  /><div class="outline-text-4" id="text-5-2-1">
<p>
Each layout should be saved into the appropriate resources directory,
named with a -&lt;screen<sub>size</sub>&gt; suffix. For example, a unique layout for
large screens should be saved under res/layout-large/.
</p>

<p>
As another example, here's a project with an alternative layout for landscape orientation:
</p>
<div class="org-src-container">

<pre class="src src-sh">MyProject/
    res/
        layout/
            main.xml
        layout-land/
            main.xml
</pre>
</div>
</div>
</li>

<li>Create Different Bitmaps<br  /><div class="outline-text-4" id="text-5-2-2">
<p>
To generate these images, you should start with your raw resource in vector format and generate the images for each density using the following size scale:
</p>

<ul class="org-ul">
<li>xhdpi: 2.0
</li>
<li>hdpi: 1.5
</li>
<li>mdpi: 1.0 (baseline)
</li>
<li>ldpi: 0.75
</li>
</ul>

<p>
This means that if you generate a 200x200 image for xhdpi devices, you
should generate the same resource in 150x150 for hdpi, 100x100 for
mdpi, and 75x75 for ldpi devices.
</p>
</div>
</li></ul>
</div>
<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3">Supporting Different Platform Versions</h3>
<div class="outline-text-3" id="text-5-3">
</div><ul class="org-ul"><li>Specify Minimum and Target API Levels<br  /><div class="outline-text-4" id="text-5-3-1">
<p>
The AndroidManifest.xml file describes details about your app and
identifies which versions of Android it supports. Specifically, the
minSdkVersion and targetSdkVersion attributes for the &lt;uses-sdk
element identify the lowest API level with which your app is
compatible and the highest API level against which you’ve designed
and tested your app.
</p>
<div class="org-src-container">

<pre class="src src-sh">&lt;manifest xmlns:<span style="color: #eedd82;">android</span>=<span style="color: #ffa07a;">"http://schemas.android.com/apk/res/android"</span> ... &gt;
    &lt;uses-sdk android:<span style="color: #eedd82;">minSdkVersion</span>=<span style="color: #ffa07a;">"4"</span> android:<span style="color: #eedd82;">targetSdkVersion</span>=<span style="color: #ffa07a;">"15"</span> /&gt;
    ...
&lt;/manifest&gt;
</pre>
</div>
</div>
</li>

<li>Check System Version at Runtime<br  /><div class="outline-text-4" id="text-5-3-2">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">private</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">setUpActionBar</span>() {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Make sure we're running on Honeycomb or higher to use ActionBar APIs</span>
    <span style="color: #00ffff;">if</span> (<span style="color: #7fffd4;">Build</span>.<span style="color: #7fffd4;">VERSION</span>.SDK_INT &gt;= <span style="color: #7fffd4;">Build</span>.<span style="color: #7fffd4;">VERSION_CODES</span>.HONEYCOMB) {
        <span style="color: #98fb98;">ActionBar</span> <span style="color: #eedd82;">actionBar</span> = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(<span style="color: #7fffd4;">true</span>);
    }
}
</pre>
</div>
</div>
</li>
<li>Use Platform Styles and Themes<br  /><div class="outline-text-4" id="text-5-3-3">
<p>
To make your activity look like a dialog box:
</p>

<p>
&lt;activity android:theme="@android:style/Theme.Dialog"&gt;
</p>

<p>
To make your activity have a transparent background:
</p>

<p>
&lt;activity android:theme="@android:style/Theme.Translucent"&gt;
To apply your own custom theme defined in /res/values/styles.xml:
</p>

<p>
&lt;activity android:theme="@style/CustomTheme"&gt;
To apply a theme to your entire app (all activities), add the android:theme attribute to the &lt;application&gt; element:
</p>

<p>
&lt;application android:theme="@style/CustomTheme"&gt;
For more about creating and using themes, read the Styles and Themes
guide.
</p>
</div>
</li></ul>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">Building a Dynamic UI with Fragments</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1">Using the Support Library</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Update your manifest file to set the minimum API level to 4 and the target API level to the latest release:
</p>

<p>
&lt;uses-sdk android:minSdkVersion="4" android:targetSdkVersion="15" /&gt;
Warning: To be sure that you don't accidentally use new APIs on an older system version, be certain that you import the Fragment class and related APIs from the android.support.v4.app package:
</p>

<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">import</span> <span style="color: #7fffd4;">android</span>.<span style="color: #7fffd4;">support</span>.<span style="color: #7fffd4;">v4</span>.<span style="color: #7fffd4;">app</span>.<span style="color: #98fb98;">Fragment</span>;
<span style="color: #00ffff;">import</span> <span style="color: #7fffd4;">android</span>.<span style="color: #7fffd4;">support</span>.<span style="color: #7fffd4;">v4</span>.<span style="color: #7fffd4;">app</span>.<span style="color: #98fb98;">FragmentManager</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2">Creating a Fragment</h3>
</div>
<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3">Building a Flexible UI</h3>
<div class="outline-text-3" id="text-6-3">
</div><ul class="org-ul"><li>Add a Fragment to an Activity at Runtime<br  /><div class="outline-text-4" id="text-6-3-1">
<p>
To perform a transaction such as add or remove a fragment, you must
use the FragmentManager to create a FragmentTransaction, which
provides APIs to add, remove, replace, and perform other fragment
transactions.
</p>

<p>
Inside your activity, call getSupportFragmentManager() to get a FragmentManager using the Support Library APIs. Then call beginTransaction() to create a FragmentTransaction and call add() to add a fragment.
</p>

<p>
You can perform multiple fragment transaction for the activity using
the same FragmentTransaction. When you're ready to make the changes,
you must call commit().
</p>
</div>
</li>

<li>Replace One Fragment with Another<br  /><div class="outline-text-4" id="text-6-3-2">
<p>
To allow the user to navigate backward through the fragment
transactions, you must call addToBackStack() before you commit the
FragmentTransaction.
</p>
</div>
</li></ul>
</div>

<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4">Communicating with Other Fragments</h3>
<div class="outline-text-3" id="text-6-4">
</div><ul class="org-ul"><li>Define an Interface<br  /><div class="outline-text-4" id="text-6-4-1">
<p>
To allow a Fragment to communicate up to its Activity, you can define
an interface in the Fragment class and implement it within the
Activity. The Fragment captures the interface implementation during
its onAttach() lifecycle method and can then call the Interface
methods in order to communicate with the Activity.
</p>
</div>
</li>
<li>Implement the Interface<br  /><div class="outline-text-4" id="text-6-4-2">
<p>
In order to receive event callbacks from the fragment, the activity
that hosts it must implement the interface defined in the fragment
class.
</p>
</div>
</li>

<li>Deliver a Message to a Fragment<br  /><div class="outline-text-4" id="text-6-4-3">
<p>
The host activity can deliver messages to a fragment by capturing the
Fragment instance with findFragmentById(), then directly call the
fragment's public methods.
</p>
</div>
</li></ul>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">Saving Data</h2>
<div class="outline-text-2" id="text-7">
<p>
<a href="http://developer.android.com/training/basics/data-storage/files.html#GetFreeSpace">http://developer.android.com/training/basics/data-storage/files.html#GetFreeSpace</a>
</p>
</div>
<div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1">Saving Key-Value Sets</h3>
<div class="outline-text-3" id="text-7-1">
</div><ul class="org-ul"><li>Get a Handle to a SharedPreferences<br  /><div class="outline-text-4" id="text-7-1-1">
<ul class="org-ul">
<li>getSharedPreferences() — Use this if you need multiple shared
preference files identified by name, which you specify with the
first parameter. You can call this from any Context in your app
</li>
<li>getPreferences() — Use this from an Activity if you need to use only
one shared preference file for the activity. Because this retrieves
a default shared preference file that belongs to the activity, you
don't need to supply a name.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-sh">Context <span style="color: #eedd82;">context</span> = getActivity();
SharedPreferences <span style="color: #eedd82;">sharedPref</span> = context.getSharedPreferences(
        getString(R.string.preference_file_key), Context.MODE_PRIVATE);

SharedPreferences <span style="color: #eedd82;">sharedPref</span> = getActivity().getPreferences(Context.MODE_PRIVATE);
</pre>
</div>
</div>
</li>
<li>Write to Shared Preferences<br  /><div class="outline-text-4" id="text-7-1-2">
<p>
Pass the keys and values you want to write with methods such as
putInt() and putString(). Then call commit() to save the changes.
</p>

<div class="org-src-container">

<pre class="src src-sh">SharedPreferences <span style="color: #eedd82;">sharedPref</span> = getActivity().getPreferences(Context.MODE_PRIVATE);
SharedPreferences.Editor <span style="color: #eedd82;">editor</span> = sharedPref.edit();
<span style="color: #87cefa;">editor.putInt</span>(getString(R.string.saved_high_score), newHighScore);
<span style="color: #87cefa;">editor.commit</span>();
</pre>
</div>
</div>
</li>
<li>Read from Shared Preferences<br  /><div class="outline-text-4" id="text-7-1-3">
<p>
call methods such as getInt() and getString(), 
</p>

<div class="org-src-container">

<pre class="src src-sh">SharedPreferences <span style="color: #eedd82;">sharedPref</span> = getActivity().getPreferences(Context.MODE_PRIVATE);
int <span style="color: #eedd82;">defaultValue</span> = getResources().getInteger(R.string.saved_high_score_default);
long <span style="color: #eedd82;">highScore</span> = sharedPref.getInt(getString(R.string.saved_high_score), defaultValue);
</pre>
</div>
</div>
</li></ul>
</div>
<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2">Saving Files</h3>
<div class="outline-text-3" id="text-7-2">
</div><ul class="org-ul"><li>Choose Internal or External Storage<br  /><div class="outline-text-4" id="text-7-2-1">
<p>
Internal storage:
</p>
<ul class="org-ul">
<li>It's always available.
</li>
<li>Files saved here are accessible by only your app by default.
</li>
<li>When the user uninstalls your app, the system removes all your app's
files from internal storage.
</li>
</ul>

<p>
External storage:
</p>
<ul class="org-ul">
<li>It's not always available, because the user can mount the external
storage as USB storage and in some cases remove it from the device.
</li>
<li>It's world-readable, so files saved here may be read outside of your
control.
</li>
<li>When the user uninstalls your app, the system removes your app's
files from here only if you save them in the directory from
getExternalFilesDir().
</li>
</ul>
</div>
</li>
<li>Obtain Permissions for External Storage<br  /><div class="outline-text-4" id="text-7-2-2">
<div class="org-src-container">

<pre class="src src-sh">&lt;manifest ...&gt;
    &lt;uses-permission android:<span style="color: #eedd82;">name</span>=<span style="color: #ffa07a;">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;
    ...
&lt;/manifest&gt;
</pre>
</div>
</div>
</li>

<li>Save a File on Internal Storage<br  /><div class="outline-text-4" id="text-7-2-3">
<ul class="org-ul">
<li>getFilesDir()
Returns a File representing an internal directory for your app.
</li>
<li>getCacheDir()
Returns a File representing an internal directory for your app's temporary cache files. 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">File</span> <span style="color: #eedd82;">file</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">File</span>(context.getFilesDir(), filename);

<span style="color: #98fb98;">String</span> <span style="color: #eedd82;">filename</span> = <span style="color: #ffa07a;">"myfile"</span>;
<span style="color: #98fb98;">String</span> <span style="color: #eedd82;">string</span> = <span style="color: #ffa07a;">"Hello world!"</span>;
<span style="color: #98fb98;">FileOutputStream</span> <span style="color: #eedd82;">outputStream</span>;

<span style="color: #00ffff;">try</span> {
  outputStream = openFileOutput(filename, <span style="color: #7fffd4;">Context</span>.MODE_PRIVATE);
  outputStream.write(string.getBytes());
  outputStream.close();
} <span style="color: #00ffff;">catch</span> (<span style="color: #98fb98;">Exception</span> <span style="color: #eedd82;">e</span>) {
  e.printStackTrace();
}
</pre>
</div>
<p>
Or, if you need to cache some files, you should instead use
createTempFile().
</p>
</div>
</li>
<li>Save a File on External Storage<br  /><div class="outline-text-4" id="text-7-2-4">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #ff7f24;">/* </span><span style="color: #ff7f24;">Checks if external storage is available for read and write */</span>
<span style="color: #00ffff;">public</span> <span style="color: #98fb98;">boolean</span> <span style="color: #87cefa;">isExternalStorageWritable</span>() {
    <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">state</span> = Environment.getExternalStorageState();
    <span style="color: #00ffff;">if</span> (<span style="color: #7fffd4;">Environment</span>.MEDIA_MOUNTED.equals(state)) {
        <span style="color: #00ffff;">return</span> <span style="color: #7fffd4;">true</span>;
    }
    <span style="color: #00ffff;">return</span> <span style="color: #7fffd4;">false</span>;
}

<span style="color: #ff7f24;">/* </span><span style="color: #ff7f24;">Checks if external storage is available to at least read */</span>
<span style="color: #00ffff;">public</span> <span style="color: #98fb98;">boolean</span> <span style="color: #87cefa;">isExternalStorageReadable</span>() {
    <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">state</span> = Environment.getExternalStorageState();
    <span style="color: #00ffff;">if</span> (<span style="color: #7fffd4;">Environment</span>.MEDIA_MOUNTED.equals(state) ||
        <span style="color: #7fffd4;">Environment</span>.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        <span style="color: #00ffff;">return</span> <span style="color: #7fffd4;">true</span>;
    }
    <span style="color: #00ffff;">return</span> <span style="color: #7fffd4;">false</span>;
}
</pre>
</div>

<p>
If you want to save public files on the external storage, use the
getExternalStoragePublicDirectory() method to get a File representing
the appropriate directory on the external storage. 
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">public</span> <span style="color: #98fb98;">File</span> <span style="color: #87cefa;">getAlbumStorageDir</span>(<span style="color: #98fb98;">String</span> <span style="color: #eedd82;">albumName</span>) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Get the directory for the user's public pictures directory. </span>
    <span style="color: #98fb98;">File</span> <span style="color: #eedd82;">file</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">File</span>(Environment.getExternalStoragePublicDirectory(
            <span style="color: #7fffd4;">Environment</span>.DIRECTORY_PICTURES), albumName);
    <span style="color: #00ffff;">if</span> (!file.mkdirs()) {
        Log.e(LOG_TAG, <span style="color: #ffa07a;">"Directory not created"</span>);
    }
    <span style="color: #00ffff;">return</span> file;
}
</pre>
</div>
<p>
If you want to save files that are private to your app, you can
acquire the appropriate directory by calling <code>getExternalFilesDir()</code> and
passing it a name indicating the type of directory you'd like. 
</p>
</div>
</li>
<li>Query Free Space<br  /><div class="outline-text-4" id="text-7-2-5">
<p>
calling getFreeSpace() or getTotalSpace(). 
</p>
</div>
</li>
<li>Delete a File<br  /><div class="outline-text-4" id="text-7-2-6">
<div class="org-src-container">

<pre class="src src-java">myFile.delete();
<span style="color: #ff7f24;">//</span><span style="color: #ff7f24;">If the file is saved on internal storage, you can also ask the Context to locate and delete a file by calling deleteFile():</span>
myContext.deleteFile(fileName);
</pre>
</div>
</div>
</li></ul>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3">Saving Data in SQL Databases</h3>
<div class="outline-text-3" id="text-7-3">
<p>
The APIs you'll need to use a database on Android are available in the
<code>android.database.sqlite</code> package
</p>
</div>
<ul class="org-ul"><li>Define a Schema and Contract<br  /><div class="outline-text-4" id="text-7-3-1">
<p>
Note: By implementing the BaseColumns interface, your inner class can
inherit a primary key field called _ID that some Android classes such
as cursor adaptors will expect it to have. It's not required, but this
can help your database work harmoniously with the Android framework.
</p>

<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #00ffff;">abstract</span> <span style="color: #00ffff;">class</span> <span style="color: #98fb98;">FeedEntry</span> <span style="color: #00ffff;">implements</span> <span style="color: #98fb98;">BaseColumns</span> {
    <span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">TABLE_NAME</span> = <span style="color: #ffa07a;">"entry"</span>;
    <span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">COLUMN_NAME_ENTRY_ID</span> = <span style="color: #ffa07a;">"entryid"</span>;
    <span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">COLUMN_NAME_TITLE</span> = <span style="color: #ffa07a;">"title"</span>;
    <span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">COLUMN_NAME_SUBTITLE</span> = <span style="color: #ffa07a;">"subtitle"</span>;
    ...
}
</pre>
</div>
</div>
</li>

<li>Create a Database Using a SQL Helper<br  /><div class="outline-text-4" id="text-7-3-2">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">private</span> <span style="color: #00ffff;">static</span> <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">TEXT_TYPE</span> = <span style="color: #ffa07a;">" TEXT"</span>;
<span style="color: #00ffff;">private</span> <span style="color: #00ffff;">static</span> <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">COMMA_SEP</span> = <span style="color: #ffa07a;">","</span>;
<span style="color: #00ffff;">private</span> <span style="color: #00ffff;">static</span> <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">SQL_CREATE_ENTRIES</span> =
    <span style="color: #ffa07a;">"CREATE TABLE "</span> + <span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.TABLE_NAME + <span style="color: #ffa07a;">" ("</span> +
    <span style="color: #7fffd4;">FeedReaderContract</span>.FeedEntry._ID + <span style="color: #ffa07a;">" INTEGER PRIMARY KEY,"</span> +
    <span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.COLUMN_NAME_ENTRY_ID + TEXT_TYPE + COMMA_SEP +
    <span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.COLUMN_NAME_TITLE + TEXT_TYPE + COMMA_SEP +
    ... <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Any other options for the CREATE command</span>
    <span style="color: #ffa07a;">" )"</span>;

<span style="color: #00ffff;">private</span> <span style="color: #00ffff;">static</span> <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">SQL_DELETE_ENTRIES</span> =
    <span style="color: #ffa07a;">"DROP TABLE IF EXISTS "</span> + TABLE_NAME_ENTRIES;
</pre>
</div>

<p>
A useful set of APIs is available in the SQLiteOpenHelper class.
</p>

<p>
Note: Because they can be long-running, be sure that you call
getWritableDatabase() or getReadableDatabase() in a background thread,
such as with AsyncTask or IntentService.
</p>

<p>
To use SQLiteOpenHelper, create a subclass that overrides the
onCreate(), onUpgrade() and onOpen() callback methods.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">public</span> <span style="color: #00ffff;">class</span> <span style="color: #98fb98;">FeedReaderDbHelper</span> <span style="color: #00ffff;">extends</span> <span style="color: #98fb98;">SQLiteOpenHelper</span> {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">If you change the database schema, you must increment the database version.</span>
    <span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">DATABASE_VERSION</span> = 1;
    <span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">DATABASE_NAME</span> = <span style="color: #ffa07a;">"FeedReader.db"</span>;

    <span style="color: #00ffff;">public</span> <span style="color: #87cefa;">FeedReaderDbHelper</span>(<span style="color: #98fb98;">Context</span> <span style="color: #eedd82;">context</span>) {
        <span style="color: #00ffff;">super</span>(context, DATABASE_NAME, <span style="color: #7fffd4;">null</span>, DATABASE_VERSION);
    }
    <span style="color: #00ffff;">public</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">onCreate</span>(<span style="color: #98fb98;">SQLiteDatabase</span> <span style="color: #eedd82;">db</span>) {
        db.execSQL(SQL_CREATE_ENTRIES);
    }
    <span style="color: #00ffff;">public</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">onUpgrade</span>(<span style="color: #98fb98;">SQLiteDatabase</span> <span style="color: #eedd82;">db</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">oldVersion</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">newVersion</span>) {
        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">This database is only a cache for online data, so its upgrade policy is</span>
        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">to simply to discard the data and start over</span>
        db.execSQL(SQL_DELETE_ENTRIES);
        onCreate(db);
    }
    <span style="color: #00ffff;">public</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">onDowngrade</span>(<span style="color: #98fb98;">SQLiteDatabase</span> <span style="color: #eedd82;">db</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">oldVersion</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">newVersion</span>) {
        onUpgrade(db, oldVersion, newVersion);
    }
}

<span style="color: #ff7f24;">//</span><span style="color: #ff7f24;">To access your database, instantiate your subclass of SQLiteOpenHelper:</span>
<span style="color: #98fb98;">FeedReaderDbHelper</span> <span style="color: #eedd82;">mDbHelper</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">FeedReaderDbHelper</span>(getContext());
</pre>
</div>
</div>
</li>
<li>Put Information into a Database<br  /><div class="outline-text-4" id="text-7-3-3">
<p>
Insert data into the database by passing a ContentValues object to the
insert() method:
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Gets the data repository in write mode</span>
<span style="color: #98fb98;">SQLiteDatabase</span> <span style="color: #eedd82;">db</span> = mDbHelper.getWritableDatabase();

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Create a new map of values, where column names are the keys</span>
<span style="color: #98fb98;">ContentValues</span> <span style="color: #eedd82;">values</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">ContentValues</span>();
values.put(<span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.COLUMN_NAME_ENTRY_ID, id);
values.put(<span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.COLUMN_NAME_TITLE, title);
values.put(<span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.COLUMN_NAME_CONTENT, content);

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Insert the new row, returning the primary key value of the new row</span>
<span style="color: #98fb98;">long</span> <span style="color: #eedd82;">newRowId</span>;
newRowId = db.insert(
         <span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.TABLE_NAME,
         <span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.COLUMN_NAME_NULLABLE,
         values);
</pre>
</div>
</div>
</li>
<li>Read Information from a Database<br  /><div class="outline-text-4" id="text-7-3-4">
<p>
To read from a database, use the query() method, passing it your
selection criteria and desired columns. 
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">SQLiteDatabase</span> <span style="color: #eedd82;">db</span> = mDbHelper.getReadableDatabase();

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Define a projection that specifies which columns from the database</span>
<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">you will actually use after this query.</span>
<span style="color: #98fb98;">String</span>[] <span style="color: #eedd82;">projection</span> = {
    <span style="color: #7fffd4;">FeedReaderContract</span>.FeedEntry._ID,
    <span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.COLUMN_NAME_TITLE,
    <span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.COLUMN_NAME_UPDATED,
    ...
    };

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">How you want the results sorted in the resulting Cursor</span>
<span style="color: #98fb98;">String</span> <span style="color: #eedd82;">sortOrder</span> =
    <span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.COLUMN_NAME_UPDATED + <span style="color: #ffa07a;">" DESC"</span>;

<span style="color: #98fb98;">Cursor</span> <span style="color: #eedd82;">c</span> = db.query(
    <span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.TABLE_NAME,  <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">The table to query</span>
    projection,                               <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">The columns to return</span>
    selection,                                <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">The columns for the WHERE clause</span>
    selectionArgs,                            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">The values for the WHERE clause</span>
    <span style="color: #7fffd4;">null</span>,                                     <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">don't group the rows</span>
    <span style="color: #7fffd4;">null</span>,                                     <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">don't filter by row groups</span>
    sortOrder                                 <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">The sort order</span>
    );

cursor.moveToFirst();
<span style="color: #98fb98;">long</span> <span style="color: #eedd82;">itemId</span> = cursor.getLong(
    cursor.getColumnIndexOrThrow(<span style="color: #7fffd4;">FeedReaderContract</span>.FeedEntry._ID)
);
</pre>
</div>
</div>
</li>
<li>Delete Information from a Database<br  /><div class="outline-text-4" id="text-7-3-5">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Define 'where' part of query.</span>
<span style="color: #98fb98;">String</span> <span style="color: #eedd82;">selection</span> = <span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.COLUMN_NAME_ENTRY_ID + <span style="color: #ffa07a;">" LIKE ?"</span>;
<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Specify arguments in placeholder order.</span>
<span style="color: #98fb98;">String</span>[] <span style="color: #eedd82;">selectionArgs</span> = { String.valueOf(rowId) };
<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Issue SQL statement.</span>
db.delete(table_name, selection, selectionArgs);
</pre>
</div>
</div>
</li>

<li>Update a Database<br  /><div class="outline-text-4" id="text-7-3-6">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">SQLiteDatabase</span> <span style="color: #eedd82;">db</span> = mDbHelper.getReadableDatabase();

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">New value for one column</span>
<span style="color: #98fb98;">ContentValues</span> <span style="color: #eedd82;">values</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">ContentValues</span>();
values.put(<span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.COLUMN_NAME_TITLE, title);

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Which row to update, based on the ID</span>
<span style="color: #98fb98;">String</span> <span style="color: #eedd82;">selection</span> = <span style="color: #7fffd4;">FeedReaderContract</span>.<span style="color: #7fffd4;">FeedEntry</span>.COLUMN_NAME_ENTRY_ID + <span style="color: #ffa07a;">" LIKE ?"</span>;
<span style="color: #98fb98;">String</span>[] <span style="color: #eedd82;">selectionArgs</span> = { String.valueOf(rowId) };

<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">count</span> = db.update(
    <span style="color: #7fffd4;">FeedReaderDbHelper</span>.<span style="color: #7fffd4;">FeedEntry</span>.TABLE_NAME,
    values,
    selection,
    selectionArgs);
</pre>
</div>
</div>
</li></ul>
</div>
</div>




<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">Interacting with Other Apps</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1">Sending the User to Another App</h3>
<div class="outline-text-3" id="text-8-1">
</div><ul class="org-ul"><li>Build an Implicit Intent<br  /><div class="outline-text-4" id="text-8-1-1">
<p>
If your data is a Uri, there's a simple Intent() constructor you can
use define the action and data.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #ff7f24;">//</span><span style="color: #ff7f24;">View a map:</span>
<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Map point based on address</span>
<span style="color: #98fb98;">Uri</span> <span style="color: #eedd82;">location</span> = Uri.parse(<span style="color: #ffa07a;">"geo:0,0?q=1600+Amphitheatre+Parkway,+Mountain+View,+California"</span>);
<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Or map point based on latitude/longitude</span>
<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Uri location = Uri.parse("geo:37.422219,-122.08364?z=14"); // z param is zoom level</span>
<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">mapIntent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>(<span style="color: #7fffd4;">Intent</span>.ACTION_VIEW, location);

<span style="color: #ff7f24;">//</span><span style="color: #ff7f24;">View a web page:</span>
<span style="color: #98fb98;">Uri</span> <span style="color: #eedd82;">webpage</span> = Uri.parse(<span style="color: #ffa07a;">"http://www.android.com"</span>);
<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">webIntent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>(<span style="color: #7fffd4;">Intent</span>.ACTION_VIEW, webpage);

<span style="color: #ff7f24;">//</span><span style="color: #ff7f24;">Send an email with an attachment:</span>
<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">emailIntent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>(<span style="color: #7fffd4;">Intent</span>.ACTION_SEND);
<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">The intent does not have a URI, so declare the "text/plain" MIME type</span>
emailIntent.setType(<span style="color: #7fffd4;">HTTP</span>.PLAIN_TEXT_TYPE);
emailIntent.putExtra(<span style="color: #7fffd4;">Intent</span>.EXTRA_EMAIL, <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">String</span>[] {<span style="color: #ffa07a;">"jon@example.com"</span>}); <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">recipients</span>
emailIntent.putExtra(<span style="color: #7fffd4;">Intent</span>.EXTRA_SUBJECT, <span style="color: #ffa07a;">"Email subject"</span>);
emailIntent.putExtra(<span style="color: #7fffd4;">Intent</span>.EXTRA_TEXT, <span style="color: #ffa07a;">"Email message text"</span>);
emailIntent.putExtra(<span style="color: #7fffd4;">Intent</span>.EXTRA_STREAM, Uri.parse(<span style="color: #ffa07a;">"content://path/to/email/attachment"</span>));
<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">You can also attach multiple items by passing an ArrayList of Uris</span>

<span style="color: #ff7f24;">//</span><span style="color: #ff7f24;">Create a calendar event:</span>
<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">calendarIntent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>(<span style="color: #7fffd4;">Intent</span>.ACTION_INSERT, <span style="color: #7fffd4;">Events</span>.CONTENT_URI);
<span style="color: #98fb98;">Calendar</span> <span style="color: #eedd82;">beginTime</span> = Calendar.getInstance().set(2012, 0, 19, 7, 30);
<span style="color: #98fb98;">Calendar</span> <span style="color: #eedd82;">endTime</span> = Calendar.getInstance().set(2012, 0, 19, 10, 30);
calendarIntent.putExtra(<span style="color: #7fffd4;">CalendarContract</span>.EXTRA_EVENT_BEGIN_TIME, beginTime.getTimeInMillis());
calendarIntent.putExtra(<span style="color: #7fffd4;">CalendarContract</span>.EXTRA_EVENT_END_TIME, endTime.getTimeInMillis());
calendarIntent.putExtra(<span style="color: #7fffd4;">Events</span>.TITLE, <span style="color: #ffa07a;">"Ninja class"</span>);
calendarIntent.putExtra(<span style="color: #7fffd4;">Events</span>.EVENT_LOCATION, <span style="color: #ffa07a;">"Secret dojo"</span>);
</pre>
</div>
</div>
</li>
<li>Verify There is an App to Receive the Intent<br  /><div class="outline-text-4" id="text-8-1-2">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">PackageManager</span> <span style="color: #eedd82;">packageManager</span> = getPackageManager();
<span style="color: #98fb98;">List</span>&lt;<span style="color: #98fb98;">ResolveInfo</span>&gt; <span style="color: #eedd82;">activities</span> = packageManager.queryIntentActivities(intent, 0);
<span style="color: #98fb98;">boolean</span> <span style="color: #eedd82;">isIntentSafe</span> = activities.size() &gt; 0;
</pre>
</div>
</div>
</li>

<li>Start an Activity with the Intent<br  /><div class="outline-text-4" id="text-8-1-3">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Build the intent</span>
<span style="color: #98fb98;">Uri</span> <span style="color: #eedd82;">location</span> = Uri.parse(<span style="color: #ffa07a;">"geo:0,0?q=1600+Amphitheatre+Parkway,+Mountain+View,+California"</span>);
<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">mapIntent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>(<span style="color: #7fffd4;">Intent</span>.ACTION_VIEW, location);

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Verify it resolves</span>
<span style="color: #98fb98;">PackageManager</span> <span style="color: #eedd82;">packageManager</span> = getPackageManager();
<span style="color: #98fb98;">List</span>&lt;<span style="color: #98fb98;">ResolveInfo</span>&gt; <span style="color: #eedd82;">activities</span> = packageManager.queryIntentActivities(mapIntent, 0);
<span style="color: #98fb98;">boolean</span> <span style="color: #eedd82;">isIntentSafe</span> = activities.size() &gt; 0;

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Start an activity if it's safe</span>
<span style="color: #00ffff;">if</span> (isIntentSafe) {
    startActivity(mapIntent);
}
</pre>
</div>
</div>
</li>

<li>Show an App Chooser<br  /><div class="outline-text-4" id="text-8-1-4">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">intent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>(<span style="color: #7fffd4;">Intent</span>.ACTION_SEND);
...

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Always use string resources for UI text. This says something like "Share this photo with"</span>
String title = getResources().getText(R.string.chooser_title);
<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Create and start the chooser</span>
<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">chooser</span> = Intent.createChooser(intent, title);
startActivity(chooser);
</pre>
</div>
</div>
</li></ul>
</div>

<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2">Getting a Result from an Activity</h3>
<div class="outline-text-3" id="text-8-2">
<p>
To receive a result, call <code>startActivityForResult()</code> (instead of
<code>startActivity()</code>).
</p>
</div>
<ul class="org-ul"><li>Start the Activity<br  /><div class="outline-text-4" id="text-8-2-1">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">static</span> <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">PICK_CONTACT_REQUEST</span> = 1;  <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">The request code</span>
...
<span style="color: #00ffff;">private</span> <span style="color: #98fb98;">void</span> pickContact() {
    <span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">pickContactIntent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>(<span style="color: #7fffd4;">Intent</span>.ACTION_PICK, Uri.parse(<span style="color: #ffa07a;">"content://contacts"</span>));
    pickContactIntent.setType(<span style="color: #7fffd4;">Phone</span>.CONTENT_TYPE); <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Show user only contacts w/ phone numbers</span>
    startActivityForResult(pickContactIntent, PICK_CONTACT_REQUEST);
}
</pre>
</div>
</div>
</li>
<li>Receive the Result<br  /><div class="outline-text-4" id="text-8-2-2">
<p>
the system calls your activity's onActivityResult() method. This
method includes three arguments:
</p>

<ul class="org-ul">
<li>The request code you passed to startActivityForResult().
</li>
<li>A result code specified by the second activity. This is either RESULT<sub>OK</sub> if the operation was successful or RESULT<sub>CANCELED</sub> if the user backed out or the operation failed for some reason.
</li>
<li>An Intent that carries the result data.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #7fffd4;">@Override</span>
<span style="color: #00ffff;">protected</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">onActivityResult</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">requestCode</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">resultCode</span>, <span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">data</span>) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Check which request we're responding to</span>
    <span style="color: #00ffff;">if</span> (requestCode == PICK_CONTACT_REQUEST) {
        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Make sure the request was successful</span>
        <span style="color: #00ffff;">if</span> (resultCode == RESULT_OK) {
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">The user picked a contact.</span>
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">The Intent's data Uri identifies which contact was selected.</span>

            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Do something with the contact here (bigger example below)</span>
        }
    }
}
</pre>
</div>
</div>
</li>

<li>Bonus: Read the contact data<br  /><div class="outline-text-4" id="text-8-2-3">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #7fffd4;">@Override</span>
<span style="color: #00ffff;">protected</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">onActivityResult</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">requestCode</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">resultCode</span>, <span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">data</span>) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Check which request it is that we're responding to</span>
    <span style="color: #00ffff;">if</span> (requestCode == PICK_CONTACT_REQUEST) {
        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Make sure the request was successful</span>
        <span style="color: #00ffff;">if</span> (resultCode == RESULT_OK) {
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Get the URI that points to the selected contact</span>
            <span style="color: #98fb98;">Uri</span> <span style="color: #eedd82;">contactUri</span> = data.getData();
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">We only need the NUMBER column, because there will be only one row in the result</span>
            <span style="color: #98fb98;">String</span>[] <span style="color: #eedd82;">projection</span> = {<span style="color: #7fffd4;">Phone</span>.NUMBER};

            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Perform the query on the contact to get the NUMBER column</span>
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">We don't need a selection or sort order (there's only one result for the given URI)</span>
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">CAUTION: The query() method should be called from a separate thread to avoid blocking</span>
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">your app's UI thread. (For simplicity of the sample, this code doesn't do that.)</span>
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Consider using CursorLoader to perform the query.</span>
            <span style="color: #98fb98;">Cursor</span> <span style="color: #eedd82;">cursor</span> = getContentResolver()
                    .query(contactUri, projection, <span style="color: #7fffd4;">null</span>, <span style="color: #7fffd4;">null</span>, <span style="color: #7fffd4;">null</span>);
            cursor.moveToFirst();

            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Retrieve the phone number from the NUMBER column</span>
            <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">column</span> = cursor.getColumnIndex(<span style="color: #7fffd4;">Phone</span>.NUMBER);
            <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">number</span> = cursor.getString(column);

            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Do something with the phone number...</span>
        }
    }
}
</pre>
</div>
</div>
</li></ul>
</div>

<div id="outline-container-sec-8-3" class="outline-3">
<h3 id="sec-8-3">Allowing Other Apps to Start Your Activity</h3>
<div class="outline-text-3" id="text-8-3">
<p>
To allow other apps to start your activity, you need to add an
&lt;intent-filter&gt; element in your manifest file for the corresponding
&lt;activity&gt; element.
</p>
</div>

<ul class="org-ul"><li>Add an Intent Filter<br  /><div class="outline-text-4" id="text-8-3-1">
<ul class="org-ul">
<li>Action A string naming the action to perform. Usually one of the
platform-defined values such as ACTION<sub>SEND</sub> or ACTION<sub>VIEW</sub>. Specify
this in your intent filter with the &lt;action&gt; element.
</li>
<li>Data A description of the data associated with the intent. Specify
this in your intent filter with the &lt;data&gt; element.
</li>
<li>Category Provides an additional way to characterize the activity
handling the intent, all implicit intents are defined with
CATEGORY<sub>DEFAULT</sub> by default.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh">&lt;activity android:<span style="color: #eedd82;">name</span>=<span style="color: #ffa07a;">"ShareActivity"</span>&gt;
    &lt;!-- filter for sending text; accepts SENDTO action with sms URI schemes --&gt;
    &lt;intent-filter&gt;
        &lt;action android:<span style="color: #eedd82;">name</span>=<span style="color: #ffa07a;">"android.intent.action.SENDTO"</span>/&gt;
        &lt;category android:<span style="color: #eedd82;">name</span>=<span style="color: #ffa07a;">"android.intent.category.DEFAULT"</span>/&gt;
        &lt;data android:<span style="color: #eedd82;">scheme</span>=<span style="color: #ffa07a;">"sms"</span> /&gt;
        &lt;data android:<span style="color: #eedd82;">scheme</span>=<span style="color: #ffa07a;">"smsto"</span> /&gt;
    &lt;/intent-filter&gt;
    &lt;!-- filter for sending text or images; accepts SEND action and text or image data --&gt;
    &lt;intent-filter&gt;
        &lt;action android:<span style="color: #eedd82;">name</span>=<span style="color: #ffa07a;">"android.intent.action.SEND"</span>/&gt;
        &lt;category android:<span style="color: #eedd82;">name</span>=<span style="color: #ffa07a;">"android.intent.category.DEFAULT"</span>/&gt;
        &lt;data android:<span style="color: #eedd82;">mimeType</span>=<span style="color: #ffa07a;">"image/*"</span>/&gt;
        &lt;data android:<span style="color: #eedd82;">mimeType</span>=<span style="color: #ffa07a;">"text/plain"</span>/&gt;
    &lt;/intent-filter&gt;
&lt;/activity&gt;
</pre>
</div>
</div>
</li>
<li>Handle the Intent in Your Activity<br  /><div class="outline-text-4" id="text-8-3-2">
<p>
call getIntent() to retrieve the Intent that started the activity.  t
you should generally do so during early callbacks such as onCreate()
or onStart().
</p>

<div class="org-src-container">

<pre class="src src-java"><span style="color: #7fffd4;">@Override</span>
<span style="color: #00ffff;">protected</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">onCreate</span>(<span style="color: #98fb98;">Bundle</span> <span style="color: #eedd82;">savedInstanceState</span>) {
    <span style="color: #00ffff;">super</span>.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Get the intent that started this activity</span>
    <span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">intent</span> = getIntent();
    <span style="color: #98fb98;">Uri</span> <span style="color: #eedd82;">data</span> = intent.getData();

    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Figure out what to do based on the intent type</span>
    <span style="color: #00ffff;">if</span> (intent.getType().indexOf(<span style="color: #ffa07a;">"image/"</span>) != -1) {
        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Handle intents with image data ...</span>
    } <span style="color: #00ffff;">else</span> <span style="color: #00ffff;">if</span> (intent.getType().equals(<span style="color: #ffa07a;">"text/plain"</span>)) {
        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Handle intents with text ...</span>
    }
}
</pre>
</div>
</div>
</li>

<li>Return a Result<br  /><div class="outline-text-4" id="text-8-3-3">
<p>
call setResult() to specify the result code and result Intent. call
finish() to close (and destroy) your activity
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Create intent to deliver some kind of result data</span>
<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">result</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>(<span style="color: #ffa07a;">"com.example.RESULT_ACTION"</span>, Uri.parse(<span style="color: #ffa07a;">"content://result_uri"</span>);
setResult(<span style="color: #7fffd4;">Activity</span>.RESULT_OK, result);
finish();
</pre>
</div>
</div>
</li></ul>
</div>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">Sharing Content</h2>
<div class="outline-text-2" id="text-9">
<p>
using <code>Intent APIs</code> and the <code>ActionProvider</code> object.
</p>
</div>
<div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1">Sending Content to Other Apps</h3>
<div class="outline-text-3" id="text-9-1">
</div><ul class="org-ul"><li>Send Text Content<br  /><div class="outline-text-4" id="text-9-1-1">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">sendIntent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>();
sendIntent.setAction(<span style="color: #7fffd4;">Intent</span>.ACTION_SEND);
sendIntent.putExtra(<span style="color: #7fffd4;">Intent</span>.EXTRA_TEXT, <span style="color: #ffa07a;">"This is my text to send."</span>);
sendIntent.setType(<span style="color: #ffa07a;">"text/plain"</span>);
startActivity(sendIntent);

<span style="color: #ff7f24;">//</span><span style="color: #ff7f24;">or</span>
startActivity(Intent.createChooser(sendIntent, getResources().getText(R.string.send_to)));
</pre>
</div>
<p>
Optionally, you can set some standard extras for the intent:
EXTRA<sub>EMAIL</sub>, EXTRA<sub>CC</sub>, EXTRA<sub>BCC</sub>, EXTRA<sub>SUBJECT</sub>. 
</p>
</div>
</li>
<li>Send Binary Content<br  /><div class="outline-text-4" id="text-9-1-2">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">shareIntent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>();
shareIntent.setAction(<span style="color: #7fffd4;">Intent</span>.ACTION_SEND);
shareIntent.putExtra(<span style="color: #7fffd4;">Intent</span>.EXTRA_STREAM, uriToImage);
shareIntent.setType(<span style="color: #ffa07a;">"image/jpeg"</span>);
startActivity(Intent.createChooser(shareIntent, getResources().getText(R.string.send_to)));
</pre>
</div>

<p>
The receiving application needs permission to access the data the Uri
points to. There are a number of ways to handle this:
</p>

<ul class="org-ul">
<li>Write the data to a file on external/shared storage (such as the SD card), which all apps can read. Use Uri.fromFile() to create the Uri that can be passed to the share intent. However, keep in mind that not all applications process a <a href="file:////">file:////</a> style Uri.
</li>
<li>Write the data to a file in your own application directory using openFileOutput() with mode MODE<sub>WORLD</sub><sub>READABLE</sub> after which getFileStreamPath() can be used to return a File. As with the previous option, Uri.fromFile() will create a <a href="file:////">file:////</a> style Uri for your share intent.
</li>
<li>Media files like images, videos and audio can be scanned and added to the system MediaStore using scanFile(). The onScanCompleted() callback returns a content:// style Uri suitable for including in your share intent.
</li>
<li>Images can be inserted into the system MediaStore using insertImage() which will return a content:// style Uri suitable for including in a share intent.
</li>
<li>Store the data in your own ContentProvider, make sure that other apps have the correct permission to access your provider (or use per-URI permissions).
</li>
</ul>
</div>
</li>
<li>Send Multiple Pieces of Content<br  /><div class="outline-text-4" id="text-9-1-3">
<p>
use the ACTION<sub>SEND</sub><sub>MULTIPLE</sub> action together with a list of URIs
pointing to the content
</p>

<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">ArrayList</span>&lt;<span style="color: #98fb98;">Uri</span>&gt; <span style="color: #eedd82;">imageUris</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">ArrayList</span>&lt;<span style="color: #98fb98;">Uri</span>&gt;();
imageUris.add(imageUri1); <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Add your image URIs here</span>
imageUris.add(imageUri2);

<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">shareIntent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>();
shareIntent.setAction(<span style="color: #7fffd4;">Intent</span>.ACTION_SEND_MULTIPLE);
shareIntent.putParcelableArrayListExtra(<span style="color: #7fffd4;">Intent</span>.EXTRA_STREAM, imageUris);
shareIntent.setType(<span style="color: #ffa07a;">"image/*"</span>);
startActivity(Intent.createChooser(shareIntent, <span style="color: #ffa07a;">"Share images to.."</span>));
</pre>
</div>
</div>
</li></ul>
</div>


<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2">Receiving Content from Other Apps</h3>
<div class="outline-text-3" id="text-9-2">
</div><ul class="org-ul"><li>Update Your Manifest<br  /><div class="outline-text-4" id="text-9-2-1">
<div class="org-src-container">

<pre class="src src-java">&lt;activity android:name=<span style="color: #ffa07a;">".ui.MyActivity"</span> &gt;
    &lt;intent-filter&gt;
        &lt;action android:name=<span style="color: #ffa07a;">"android.intent.action.SEND"</span> /&gt;
        &lt;category android:name=<span style="color: #ffa07a;">"android.intent.category.DEFAULT"</span> /&gt;
        &lt;data android:mimeType=<span style="color: #ffa07a;">"image/*"</span> /&gt;
    &lt;/intent-filter&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=<span style="color: #ffa07a;">"android.intent.action.SEND"</span> /&gt;
        &lt;category android:name=<span style="color: #ffa07a;">"android.intent.category.DEFAULT"</span> /&gt;
        &lt;data android:mimeType=<span style="color: #ffa07a;">"text/plain"</span> /&gt;
    &lt;/intent-filter&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=<span style="color: #ffa07a;">"android.intent.action.SEND_MULTIPLE"</span> /&gt;
        &lt;category android:name=<span style="color: #ffa07a;">"android.intent.category.DEFAULT"</span> /&gt;
        &lt;data android:mimeType=<span style="color: #ffa07a;">"image/*"</span> /&gt;
    &lt;/intent-filter&gt;
&lt;/activity&gt;
</pre>
</div>
</div>
</li>

<li>Handle the Incoming Content<br  /><div class="outline-text-4" id="text-9-2-2">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">void</span> <span style="color: #87cefa;">onCreate</span> (<span style="color: #98fb98;">Bundle</span> <span style="color: #eedd82;">savedInstanceState</span>) {
    ...
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Get intent, action and MIME type</span>
    Intent intent = getIntent();
    <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">action</span> = intent.getAction();
    <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">type</span> = intent.getType();

    <span style="color: #00ffff;">if</span> (<span style="color: #7fffd4;">Intent</span>.ACTION_SEND.equals(action) &amp;&amp; type != <span style="color: #7fffd4;">null</span>) {
        <span style="color: #00ffff;">if</span> (<span style="color: #ffa07a;">"text/plain"</span>.equals(type)) {
            handleSendText(intent); <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Handle text being sent</span>
        } <span style="color: #00ffff;">else</span> <span style="color: #00ffff;">if</span> (type.startsWith(<span style="color: #ffa07a;">"image/"</span>)) {
            handleSendImage(intent); <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Handle single image being sent</span>
        }
    } <span style="color: #00ffff;">else</span> <span style="color: #00ffff;">if</span> (<span style="color: #7fffd4;">Intent</span>.ACTION_SEND_MULTIPLE.equals(action) &amp;&amp; type != <span style="color: #7fffd4;">null</span>) {
        <span style="color: #00ffff;">if</span> (type.startsWith(<span style="color: #ffa07a;">"image/"</span>)) {
            handleSendMultipleImages(intent); <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Handle multiple images being sent</span>
        }
    } <span style="color: #00ffff;">else</span> {
        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Handle other intents, such as being started from the home screen</span>
    }
    ...
}

<span style="color: #98fb98;">void</span> <span style="color: #87cefa;">handleSendText</span>(<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">intent</span>) {
    <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">sharedText</span> = intent.getStringExtra(<span style="color: #7fffd4;">Intent</span>.EXTRA_TEXT);
    <span style="color: #00ffff;">if</span> (sharedText != <span style="color: #7fffd4;">null</span>) {
        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Update UI to reflect text being shared</span>
    }
}

<span style="color: #98fb98;">void</span> <span style="color: #87cefa;">handleSendImage</span>(<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">intent</span>) {
    <span style="color: #98fb98;">Uri</span> <span style="color: #eedd82;">imageUri</span> = (<span style="color: #98fb98;">Uri</span>) intent.getParcelableExtra(<span style="color: #7fffd4;">Intent</span>.EXTRA_STREAM);
    <span style="color: #00ffff;">if</span> (imageUri != <span style="color: #7fffd4;">null</span>) {
        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Update UI to reflect image being shared</span>
    }
}

<span style="color: #98fb98;">void</span> <span style="color: #87cefa;">handleSendMultipleImages</span>(<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">intent</span>) {
    <span style="color: #98fb98;">ArrayList</span>&lt;<span style="color: #98fb98;">Uri</span>&gt; <span style="color: #eedd82;">imageUris</span> = intent.getParcelableArrayListExtra(<span style="color: #7fffd4;">Intent</span>.EXTRA_STREAM);
    <span style="color: #00ffff;">if</span> (imageUris != <span style="color: #7fffd4;">null</span>) {
        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Update UI to reflect multiple images being shared</span>
    }
}
</pre>
</div>
</div>
</li></ul>
</div>
<div id="outline-container-sec-9-3" class="outline-3">
<h3 id="sec-9-3">Adding an Easy Share Action</h3>
<div class="outline-text-3" id="text-9-3">
<p>
ActionProvider in Android 4.0 (API Level 14)
</p>
</div>
<ul class="org-ul"><li>Update Menu Declarations<br  /><div class="outline-text-4" id="text-9-3-1">
<p>
To get started with ShareActionProviders, define the
android:actionProviderClass attribute for the corresponding &lt;item&gt; in
your menu resource file:
</p>
<div class="org-src-container">

<pre class="src src-sh">&lt;menu xmlns:<span style="color: #eedd82;">android</span>=<span style="color: #ffa07a;">"http://schemas.android.com/apk/res/android"</span>&gt;
    &lt;item android:<span style="color: #eedd82;">id</span>=<span style="color: #ffa07a;">"@+id/menu_item_share"</span>
        android:<span style="color: #eedd82;">showAsAction</span>=<span style="color: #ffa07a;">"ifRoom"</span>
        android:<span style="color: #eedd82;">title</span>=<span style="color: #ffa07a;">"Share"</span>
        android:<span style="color: #eedd82;">actionProviderClass</span>=<span style="color: #ffa07a;">"android.widget.ShareActionProvider"</span> /&gt;
    ...
&lt;/menu&gt;
</pre>
</div>
</div>
</li>

<li>Set the Share Intent<br  /><div class="outline-text-4" id="text-9-3-2">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">private</span> <span style="color: #98fb98;">ShareActionProvider</span> <span style="color: #eedd82;">mShareActionProvider</span>;
...

<span style="color: #7fffd4;">@Override</span>
<span style="color: #00ffff;">public</span> <span style="color: #98fb98;">boolean</span> onCreateOptionsMenu(<span style="color: #98fb98;">Menu</span> <span style="color: #eedd82;">menu</span>) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Inflate menu resource file.</span>
    getMenuInflater().inflate(R.menu.share_menu, menu);

    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Locate MenuItem with ShareActionProvider</span>
    <span style="color: #98fb98;">MenuItem</span> <span style="color: #eedd82;">item</span> = menu.findItem(R.id.menu_item_share);

    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Fetch and store ShareActionProvider</span>
    mShareActionProvider = (<span style="color: #98fb98;">ShareActionProvider</span>) item.getActionProvider();

    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Return true to display menu</span>
    <span style="color: #00ffff;">return</span> <span style="color: #7fffd4;">true</span>;
}

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Call to update the share intent</span>
<span style="color: #00ffff;">private</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">setShareIntent</span>(<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">shareIntent</span>) {
    <span style="color: #00ffff;">if</span> (mShareActionProvider != <span style="color: #7fffd4;">null</span>) {
        mShareActionProvider.setShareIntent(shareIntent);
    }
}
</pre>
</div>
</div>
</li></ul>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10">Managing Audio Playback</h2>
<div class="outline-text-2" id="text-10">
</div><div id="outline-container-sec-10-1" class="outline-3">
<h3 id="sec-10-1">Controlling Your App’s Volume and Playback</h3>
<div class="outline-text-3" id="text-10-1">
</div><ul class="org-ul"><li>Identify Which Audio Stream to Use<br  /><div class="outline-text-4" id="text-10-1-1">
<p>
Android maintains a separate audio stream for playing music, alarms,
notifications, the incoming call ringer, system sounds, in-call
volume, and DTMF tones. This is done primarily to allow users to
control the volume of each stream independently.
</p>

<p>
Most of these streams are restricted to system events, so unless your
app is a replacement alarm clock, you’ll almost certainly be playing
your audio using the STREAM<sub>MUSIC</sub> stream.
</p>
</div>
</li>

<li>Use Hardware Volume Keys to Control Your App’s Audio Volume<br  /><div class="outline-text-4" id="text-10-1-2">
<p>
call it within the onCreate() method (of the Activity or Fragment that
controls your media). This ensures that whenever your app is visible,
the volume controls function as the user expects.
</p>

<p>
<code>setVolumeControlStream(AudioManager.STREAM_MUSIC);</code>
</p>
</div>
</li>

<li>Use Hardware Playback Control Keys to Control Your App’s Audio Playback<br  /><div class="outline-text-4" id="text-10-1-3">
<ul class="org-ul">
<li>Whenever a user presses one of these hardware keys, the system
broadcasts an intent with the ACTION<sub>MEDIA</sub><sub>BUTTON</sub> action.
</li>
<li>To respond to media button clicks, you need to register a
BroadcastReceiver in your manifest that listens for this action
broadcast 
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh">&lt;receiver android:<span style="color: #eedd82;">name</span>=<span style="color: #ffa07a;">".RemoteControlReceiver"</span>&gt;
    &lt;intent-filter&gt;
        &lt;action android:<span style="color: #eedd82;">name</span>=<span style="color: #ffa07a;">"android.intent.action.MEDIA_BUTTON"</span> /&gt;
    &lt;/intent-filter&gt;
&lt;/receiver&gt;
</pre>
</div>

<p>
The Intent includes this under the EXTRA<sub>KEY</sub><sub>EVENT</sub> key, while the
KeyEvent class includes a list KEYCODE<sub>MEDIA</sub><sub>*</sub> static constants that
represents each of the possible media buttons, such as
KEYCODE<sub>MEDIA</sub><sub>PLAY</sub><sub>PAUSE</sub> and KEYCODE<sub>MEDIA</sub><sub>NEXT</sub>.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">public</span> <span style="color: #00ffff;">class</span> <span style="color: #98fb98;">RemoteControlReceiver</span> <span style="color: #00ffff;">extends</span> <span style="color: #98fb98;">BroadcastReceiver</span> {
    <span style="color: #7fffd4;">@Override</span>
    <span style="color: #00ffff;">public</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">onReceive</span>(<span style="color: #98fb98;">Context</span> <span style="color: #eedd82;">context</span>, <span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">intent</span>) {
        <span style="color: #00ffff;">if</span> (<span style="color: #7fffd4;">Intent</span>.ACTION_MEDIA_BUTTON.equals(intent.getAction())) {
            <span style="color: #98fb98;">KeyEvent</span> <span style="color: #eedd82;">event</span> = (<span style="color: #98fb98;">KeyEvent</span>)intent.getParcelableExtra(<span style="color: #7fffd4;">Intent</span>.EXTRA_KEY_EVENT);
            <span style="color: #00ffff;">if</span> (<span style="color: #7fffd4;">KeyEvent</span>.KEYCODE_MEDIA_PLAY == event.getKeyCode()) {
                <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Handle key press.</span>
            }
        }
    }
}
</pre>
</div>

<p>
The following code can be used within your app to register and
de-register your media button event receiver using the AudioManager.
When registered, your broadcast receiver is the exclusive receiver of
all media button broadcasts.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">AudioManager</span> <span style="color: #eedd82;">am</span> = mContext.getSystemService(<span style="color: #7fffd4;">Context</span>.AUDIO_SERVICE);
...

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Start listening for button presses</span>
am.registerMediaButtonEventReceiver(RemoteControlReceiver);
...

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Stop listening for button presses</span>
am.unregisterMediaButtonEventReceiver(RemoteControlReceiver);
</pre>
</div>
</div>
</li></ul>
</div>
<div id="outline-container-sec-10-2" class="outline-3">
<h3 id="sec-10-2">Managing Audio Focus</h3>
<div class="outline-text-3" id="text-10-2">
</div><ul class="org-ul"><li>Request the Audio Focus<br  /><div class="outline-text-4" id="text-10-2-1">
<p>
, it should hold the audio focus for the stream it will be using. This
is done with a call to requestAudioFocus() which returns
AUDIOFOCUS<sub>REQUEST</sub><sub>GRANTED</sub> if your request is successful.
</p>

<p>
The following snippet requests permanent audio focus on the music audio stream. 
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">AudioManager</span> <span style="color: #eedd82;">am</span> = mContext.getSystemService(<span style="color: #7fffd4;">Context</span>.AUDIO_SERVICE);
...

<span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Request audio focus for playback</span>
<span style="color: #98fb98;">int</span> result = am.requestAudioFocus(afChangeListener,
                                 <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Use the music stream.</span>
                                 <span style="color: #7fffd4;">AudioManager</span>.STREAM_MUSIC,
                                 <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Request permanent focus.</span>
                                 <span style="color: #7fffd4;">AudioManager</span>.AUDIOFOCUS_GAIN);

<span style="color: #00ffff;">if</span> (result == <span style="color: #7fffd4;">AudioManager</span>.AUDIOFOCUS_REQUEST_GRANTED) {
    am.unregisterMediaButtonEventReceiver(RemoteControlReceiver);
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Start playback.</span>
}
</pre>
</div>

<p>
abandoning transient focus, this allows any interupted app to continue
playback.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Abandon audio focus when playback complete    </span>
am.abandonAudioFocus(afChangeListener);
</pre>
</div>

<p>
When requesting transient audio focus you have an additional option:
whether or not you want to enable "ducking."
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Request audio focus for playback</span>
<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">result</span> = am.requestAudioFocus(afChangeListener,
                             <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Use the music stream.</span>
                             <span style="color: #7fffd4;">AudioManager</span>.STREAM_MUSIC,
                             <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Request permanent focus.</span>
                             <span style="color: #7fffd4;">AudioManager</span>.AUDIOFOCUS_GAIN_TRANSIENT_MAY_DUCK);

<span style="color: #00ffff;">if</span> (result == <span style="color: #7fffd4;">AudioManager</span>.AUDIOFOCUS_REQUEST_GRANTED) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Start playback.</span>
}
</pre>
</div>
</div>
</li>
<li>Handle the Loss of Audio Focus<br  /><div class="outline-text-4" id="text-10-2-2">
<p>
The onAudioFocusChange() callback method of they audio focus change
listener you registered when requesting audio focus receives a
parameter that describes the focus change event. 
</p>

<p>
In the following code snippet, we pause the playback or our media
player object if the audio loss is transient and resume it when we
have regained the focus. If the loss is permanent, it unregisters our
media button event receiver and stops monitoring audio focus changes.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">OnAudioFocusChangeListener</span> <span style="color: #eedd82;">afChangeListener</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">OnAudioFocusChangeListener</span>() {
    <span style="color: #00ffff;">public</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">onAudioFocusChange</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">focusChange</span>) {
        <span style="color: #00ffff;">if</span> (focusChange == AUDIOFOCUS_LOSS_TRANSIENT
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Pause playback</span>
        } <span style="color: #00ffff;">else</span> <span style="color: #00ffff;">if</span> (focusChange == <span style="color: #7fffd4;">AudioManager</span>.AUDIOFOCUS_GAIN) {
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Resume playback </span>
        } <span style="color: #00ffff;">else</span> <span style="color: #00ffff;">if</span> (focusChange == <span style="color: #7fffd4;">AudioManager</span>.AUDIOFOCUS_LOSS) {
            am.unregisterMediaButtonEventReceiver(RemoteControlReceiver);
            am.abandonAudioFocus(afChangeListener);
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Stop playback</span>
        }
    }
};
</pre>
</div>
</div>
</li>

<li>Duck!<br  /><div class="outline-text-4" id="text-10-2-3">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">OnAudioFocusChangeListener</span> <span style="color: #eedd82;">afChangeListener</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">OnAudioFocusChangeListener</span>() {
    <span style="color: #00ffff;">public</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">onAudioFocusChange</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">focusChange</span>) {
        <span style="color: #00ffff;">if</span> (focusChange == AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK) {
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Lower the volume</span>
        } <span style="color: #00ffff;">else</span> <span style="color: #00ffff;">if</span> (focusChange == <span style="color: #7fffd4;">AudioManager</span>.AUDIOFOCUS_GAIN) {
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Raise it back to normal</span>
        }
    }
};
</pre>
</div>
</div>
</li></ul>
</div>

<div id="outline-container-sec-10-3" class="outline-3">
<h3 id="sec-10-3">Dealing with Audio Output Hardware</h3>
<div class="outline-text-3" id="text-10-3">
</div><ul class="org-ul"><li>Check What Hardware is Being Used<br  /><div class="outline-text-4" id="text-10-3-1">
<p>
You can query the AudioManager to determine if the audio is currently
being routed to the device speaker, wired headset, or attached
Bluetooth device as shown in the following snippet:
</p>

<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">if</span> (isBluetoothA2dpOn()) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Adjust output for Bluetooth.</span>
} <span style="color: #00ffff;">else</span> <span style="color: #00ffff;">if</span> (isSpeakerphoneOn()) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Adjust output for Speakerphone.</span>
} <span style="color: #00ffff;">else</span> <span style="color: #00ffff;">if</span> (isWiredHeadsetOn()) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Adjust output for headsets</span>
} <span style="color: #00ffff;">else</span> { 
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">If audio plays and noone can hear it, is it still playing?</span>
}
</pre>
</div>
</div>
</li>

<li>Handle Changes in the Audio Output Hardware<br  /><div class="outline-text-4" id="text-10-3-2">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">private</span> <span style="color: #00ffff;">class</span> <span style="color: #98fb98;">NoisyAudioStreamReceiver</span> <span style="color: #00ffff;">extends</span> <span style="color: #98fb98;">BroadcastReceiver</span> {
    <span style="color: #7fffd4;">@Override</span>
    <span style="color: #00ffff;">public</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">onReceive</span>(<span style="color: #98fb98;">Context</span> <span style="color: #eedd82;">context</span>, <span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">intent</span>) {
        <span style="color: #00ffff;">if</span> (<span style="color: #7fffd4;">AudioManager</span>.ACTION_AUDIO_BECOMING_NOISY.equals(intent.getAction())) {
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Pause the playback</span>
        }
    }
}

<span style="color: #00ffff;">private</span> <span style="color: #98fb98;">IntentFilter</span> <span style="color: #eedd82;">intentFilter</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">IntentFilter</span>(<span style="color: #7fffd4;">AudioManager</span>.ACTION_AUDIO_BECOMING_NOISY);

<span style="color: #00ffff;">private</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">startPlayback</span>() {
    registerReceiver(myNoisyAudioStreamReceiver(), intentFilter);
}

<span style="color: #00ffff;">private</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">stopPlayback</span>() {
    unregisterReceiver(myNoisyAudioStreamReceiver);
}
</pre>
</div>
</div>
</li></ul>
</div>
</div>



<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11">Capturing Photos</h2>
<div class="outline-text-2" id="text-11">
</div><div id="outline-container-sec-11-1" class="outline-3">
<h3 id="sec-11-1">Taking Photos Simply</h3>
<div class="outline-text-3" id="text-11-1">
</div><ul class="org-ul"><li>Request Camera Permission<br  /><div class="outline-text-4" id="text-11-1-1">
<div class="org-src-container">

<pre class="src src-sh">&lt;manifest ... &gt;
    &lt;uses-feature android:<span style="color: #eedd82;">name</span>=<span style="color: #ffa07a;">"android.hardware.camera"</span> /&gt;
    ...
&lt;/manifest ... &gt;
</pre>
</div>
</div>
</li>

<li>Take a Photo with the Camera App<br  /><div class="outline-text-4" id="text-11-1-2">
<p>
invokes an intent to capture a photo.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">private</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">dispatchTakePictureIntent</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">actionCode</span>) {
    <span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">takePictureIntent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>(<span style="color: #7fffd4;">MediaStore</span>.ACTION_IMAGE_CAPTURE);
    startActivityForResult(takePictureIntent, actionCode);
}
</pre>
</div>

<p>
Here is a function to check whether an app can handle your intent:
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #98fb98;">boolean</span> <span style="color: #87cefa;">isIntentAvailable</span>(<span style="color: #98fb98;">Context</span> <span style="color: #eedd82;">context</span>, <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">action</span>) {
    <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">PackageManager</span> <span style="color: #eedd82;">packageManager</span> = context.getPackageManager();
    <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">intent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>(action);
    <span style="color: #98fb98;">List</span>&lt;<span style="color: #98fb98;">ResolveInfo</span>&gt; <span style="color: #eedd82;">list</span> =
            packageManager.queryIntentActivities(intent, <span style="color: #7fffd4;">PackageManager</span>.MATCH_DEFAULT_ONLY);
    <span style="color: #00ffff;">return</span> list.size() &gt; 0;
}
</pre>
</div>
</div>
</li>

<li>View the Photo<br  /><div class="outline-text-4" id="text-11-1-3">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">private</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">handleSmallCameraPhoto</span>(<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">intent</span>) {
    <span style="color: #98fb98;">Bundle</span> <span style="color: #eedd82;">extras</span> = intent.getExtras();
    mImageBitmap = (<span style="color: #98fb98;">Bitmap</span>) extras.get(<span style="color: #ffa07a;">"data"</span>);
    mImageView.setImageBitmap(mImageBitmap);
}
</pre>
</div>
</div>
</li>

<li>Save the Photo<br  /><div class="outline-text-4" id="text-11-1-4">
<div class="org-src-container">

<pre class="src src-java">storageDir = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">File</span>(
    Environment.getExternalStoragePublicDirectory(
        <span style="color: #7fffd4;">Environment</span>.DIRECTORY_PICTURES
    ), 
    getAlbumName()
);
</pre>
</div>
</div>
<ul class="org-ul"><li>Set the file name<br  /><div class="outline-text-5" id="text-11-1-4-1">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">private</span> <span style="color: #98fb98;">File</span> <span style="color: #87cefa;">createImageFile</span>() <span style="color: #00ffff;">throws</span> <span style="color: #98fb98;">IOException</span> {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Create an image file name</span>
    <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">timeStamp</span> = 
        <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">SimpleDateFormat</span>(<span style="color: #ffa07a;">"yyyyMMdd_HHmmss"</span>).format(<span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Date</span>());
    <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">imageFileName</span> = JPEG_FILE_PREFIX + timeStamp + <span style="color: #ffa07a;">"_"</span>;
    <span style="color: #98fb98;">File</span> <span style="color: #eedd82;">image</span> = File.createTempFile(
        imageFileName, 
        JPEG_FILE_SUFFIX, 
        getAlbumDir()
    );
    mCurrentPhotoPath = image.getAbsolutePath();
    <span style="color: #00ffff;">return</span> image;
}
</pre>
</div>
</div>
</li>

<li>Append the file name onto the Intent<br  /><div class="outline-text-5" id="text-11-1-4-2">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #98fb98;">File</span> <span style="color: #eedd82;">f</span> = createImageFile();
takePictureIntent.putExtra(<span style="color: #7fffd4;">MediaStore</span>.EXTRA_OUTPUT, Uri.fromFile(f));
</pre>
</div>
</div>
</li></ul>
</li>

<li>Add the Photo to a Gallery<br  /><div class="outline-text-4" id="text-11-1-5">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">private</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">galleryAddPic</span>() {
    <span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">mediaScanIntent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>(<span style="color: #7fffd4;">Intent</span>.ACTION_MEDIA_SCANNER_SCAN_FILE);
    <span style="color: #98fb98;">File</span> <span style="color: #eedd82;">f</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">File</span>(mCurrentPhotoPath);
    <span style="color: #98fb98;">Uri</span> <span style="color: #eedd82;">contentUri</span> = Uri.fromFile(f);
    mediaScanIntent.setData(contentUri);
    <span style="color: #00ffff;">this</span>.sendBroadcast(mediaScanIntent);
}
</pre>
</div>
</div>
</li>

<li>Decode a Scaled Image<br  /><div class="outline-text-4" id="text-11-1-6">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">private</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">setPic</span>() {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Get the dimensions of the View</span>
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">targetW</span> = mImageView.getWidth();
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">targetH</span> = mImageView.getHeight();

    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Get the dimensions of the bitmap</span>
    <span style="color: #7fffd4;">BitmapFactory</span>.<span style="color: #98fb98;">Options</span> <span style="color: #eedd82;">bmOptions</span> = <span style="color: #00ffff;">new</span> <span style="color: #7fffd4;">BitmapFactory</span>.<span style="color: #98fb98;">Options</span>();
    bmOptions.inJustDecodeBounds = <span style="color: #7fffd4;">true</span>;
    BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">photoW</span> = bmOptions.outWidth;
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">photoH</span> = bmOptions.outHeight;

    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Determine how much to scale down the image</span>
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">scaleFactor</span> = Math.min(photoW/targetW, photoH/targetH);

    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Decode the image file into a Bitmap sized to fill the View</span>
    bmOptions.inJustDecodeBounds = <span style="color: #7fffd4;">false</span>;
    bmOptions.inSampleSize = scaleFactor;
    bmOptions.inPurgeable = <span style="color: #7fffd4;">true</span>;

    <span style="color: #98fb98;">Bitmap</span> <span style="color: #eedd82;">bitmap</span> = BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);
    mImageView.setImageBitmap(bitmap);
}
</pre>
</div>
</div>
</li></ul>
</div>
<div id="outline-container-sec-11-2" class="outline-3">
<h3 id="sec-11-2">Recording Videos Simply</h3>
<div class="outline-text-3" id="text-11-2">
</div><ul class="org-ul"><li>Request Camera Permission<br  /><div class="outline-text-4" id="text-11-2-1">
<div class="org-src-container">

<pre class="src src-sh">&lt;manifest ... &gt;
    &lt;uses-feature android:<span style="color: #eedd82;">name</span>=<span style="color: #ffa07a;">"android.hardware.camera"</span> /&gt;
    ...
&lt;/manifest ... &gt;
</pre>
</div>
</div>
</li>

<li>Record a Video with a Camera App<br  /><div class="outline-text-4" id="text-11-2-2">
<p>
invoke an Intent 
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">private</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">dispatchTakeVideoIntent</span>() {
    <span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">takeVideoIntent</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Intent</span>(<span style="color: #7fffd4;">MediaStore</span>.ACTION_VIDEO_CAPTURE);
    startActivityForResult(takeVideoIntent, ACTION_TAKE_VIDEO);
}
</pre>
</div>
</div>
</li>

<li>View the Video<br  /><div class="outline-text-4" id="text-11-2-3">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">private</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">handleCameraVideo</span>(<span style="color: #98fb98;">Intent</span> <span style="color: #eedd82;">intent</span>) {
    mVideoUri = intent.getData();
    mVideoView.setVideoURI(mVideoUri);
}
</pre>
</div>
</div>
</li></ul>
</div>
<div id="outline-container-sec-11-3" class="outline-3">
<h3 id="sec-11-3">Controlling the Camera</h3>
<div class="outline-text-3" id="text-11-3">
</div><ul class="org-ul"><li>Open the Camera Object<br  /><div class="outline-text-4" id="text-11-3-1">
<p>
Calling Camera.open() throws an exception if the camera is already in
use by another application, so we wrap it in a try block.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">private</span> <span style="color: #98fb98;">boolean</span> <span style="color: #87cefa;">safeCameraOpen</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">id</span>) {
    <span style="color: #98fb98;">boolean</span> <span style="color: #eedd82;">qOpened</span> = <span style="color: #7fffd4;">false</span>;

    <span style="color: #00ffff;">try</span> {
        releaseCameraAndPreview();
        mCamera = Camera.open(id);
        qOpened = (mCamera != <span style="color: #7fffd4;">null</span>);
    } <span style="color: #00ffff;">catch</span> (<span style="color: #98fb98;">Exception</span> <span style="color: #eedd82;">e</span>) {
        Log.e(getString(R.string.app_name), <span style="color: #ffa07a;">"failed to open Camera"</span>);
        e.printStackTrace();
    }

    <span style="color: #00ffff;">return</span> qOpened;    
}

<span style="color: #00ffff;">private</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">releaseCameraAndPreview</span>() {
    mPreview.setCamera(<span style="color: #7fffd4;">null</span>);
    <span style="color: #00ffff;">if</span> (mCamera != <span style="color: #7fffd4;">null</span>) {
        mCamera.release();
        mCamera = <span style="color: #7fffd4;">null</span>;
    }
}
</pre>
</div>
</div>
</li>
<li>Create the Camera Preview<br  /><ul class="org-ul"><li>Preview Class<br  /><div class="outline-text-5" id="text-11-3-2-1">
<p>
To get started with displaying a preview, you need preview class. The
preview requires an implementation of the
android.view.SurfaceHolder.Callback interface, which is used to pass
image data from the camera hardware to the application.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">class</span> <span style="color: #98fb98;">Preview</span> <span style="color: #00ffff;">extends</span> <span style="color: #98fb98;">ViewGroup</span> <span style="color: #00ffff;">implements</span> <span style="color: #7fffd4;">SurfaceHolder</span>.<span style="color: #98fb98;">Callback</span> {

    <span style="color: #98fb98;">SurfaceView</span> <span style="color: #eedd82;">mSurfaceView</span>;
    <span style="color: #98fb98;">SurfaceHolder</span> <span style="color: #eedd82;">mHolder</span>;

    <span style="color: #87cefa;">Preview</span>(<span style="color: #98fb98;">Context</span> <span style="color: #eedd82;">context</span>) {
        <span style="color: #00ffff;">super</span>(context);

        mSurfaceView = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">SurfaceView</span>(context);
        addView(mSurfaceView);

        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Install a SurfaceHolder.Callback so we get notified when the</span>
        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">underlying surface is created and destroyed.</span>
        mHolder = mSurfaceView.getHolder();
        mHolder.addCallback(<span style="color: #00ffff;">this</span>);
        mHolder.setType(<span style="color: #7fffd4;">SurfaceHolder</span>.SURFACE_TYPE_PUSH_BUFFERS);
    }
...
}
</pre>
</div>
</div>
</li>
<li>Set and Start the Preview<br  /><div class="outline-text-5" id="text-11-3-2-2">
<p>
A camera instance and its related preview must be created in a
specific order, with the camera object being first. In the snippet
below, the process of initializing the camera is encapsulated so that
Camera.startPreview() is called by the setCamera() method, whenever
the user does something to change the camera. 
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">public</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">setCamera</span>(<span style="color: #98fb98;">Camera</span> <span style="color: #eedd82;">camera</span>) {
    <span style="color: #00ffff;">if</span> (mCamera == camera) { <span style="color: #00ffff;">return</span>; }

    stopPreviewAndFreeCamera();

    mCamera = camera;

    <span style="color: #00ffff;">if</span> (mCamera != <span style="color: #7fffd4;">null</span>) {
        <span style="color: #98fb98;">List</span>&lt;<span style="color: #98fb98;">Size</span>&gt; <span style="color: #eedd82;">localSizes</span> = mCamera.getParameters().getSupportedPreviewSizes();
        mSupportedPreviewSizes = localSizes;
        requestLayout();

        <span style="color: #00ffff;">try</span> {
            mCamera.setPreviewDisplay(mHolder);
        } <span style="color: #00ffff;">catch</span> (<span style="color: #98fb98;">IOException</span> <span style="color: #eedd82;">e</span>) {
            e.printStackTrace();
        }

        <span style="color: #ff7f24;">/*</span>
<span style="color: #ff7f24;">          Important: Call startPreview() to start updating the preview surface. Preview must </span>
<span style="color: #ff7f24;">          be started before you can take a picture.</span>
<span style="color: #ff7f24;">          */</span>
        mCamera.startPreview();
    }
}
</pre>
</div>
</div>
</li></ul>
</li>

<li>Modify Camera Settings<br  /><div class="outline-text-4" id="text-11-3-3">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">public</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">surfaceChanged</span>(<span style="color: #98fb98;">SurfaceHolder</span> <span style="color: #eedd82;">holder</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">format</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">w</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">h</span>) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Now that the size is known, set up the camera parameters and begin</span>
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">the preview.</span>
    <span style="color: #7fffd4;">Camera</span>.<span style="color: #98fb98;">Parameters</span> <span style="color: #eedd82;">parameters</span> = mCamera.getParameters();
    parameters.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
    requestLayout();
    mCamera.setParameters(parameters);

    <span style="color: #ff7f24;">/*</span>
<span style="color: #ff7f24;">      Important: Call startPreview() to start updating the preview surface. Preview must be</span>
<span style="color: #ff7f24;">      started before you can take a picture.</span>
<span style="color: #ff7f24;">    */</span>
    mCamera.startPreview();
}
</pre>
</div>
</div>
</li>
<li>Set the Preview Orientation<br  /><div class="outline-text-4" id="text-11-3-4">
<p>
The <code>setCameraDisplayOrientation()</code> method lets you change how the
preview is displayed without affecting how the image is recorded.
</p>
</div>
</li>
<li>Take a Picture<br  /><div class="outline-text-4" id="text-11-3-5">
<p>
Use the Camera.takePicture() method to take a picture once the preview
is started. You can create Camera.PictureCallback and
Camera.ShutterCallback objects and pass them into
Camera.takePicture().
</p>
</div>
</li>

<li>Restart the Preview<br  /><div class="outline-text-4" id="text-11-3-6">
<p>
After a picture is taken, you must restart the preview before the user
can take another picture. 
</p>

<div class="org-src-container">

<pre class="src src-java"><span style="color: #7fffd4;">@Override</span>
<span style="color: #00ffff;">public</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">onClick</span>(<span style="color: #98fb98;">View</span> <span style="color: #eedd82;">v</span>) {
    <span style="color: #00ffff;">switch</span>(mPreviewState) {
    <span style="color: #00ffff;">case</span> K_STATE_FROZEN:
        mCamera.startPreview();
        mPreviewState = K_STATE_PREVIEW;
        <span style="color: #00ffff;">break</span>;

    <span style="color: #00ffff;">default</span>:
        mCamera.takePicture( <span style="color: #7fffd4;">null</span>, rawCallback, <span style="color: #7fffd4;">null</span>);
        mPreviewState = K_STATE_BUSY;
    } <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">switch</span>
    shutterBtnConfig();
}
</pre>
</div>
</div>
</li>

<li>Stop the Preview and Release the Camera<br  /><div class="outline-text-4" id="text-11-3-7">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">public</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">surfaceDestroyed</span>(<span style="color: #98fb98;">SurfaceHolder</span> <span style="color: #eedd82;">holder</span>) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Surface will be destroyed when we return, so stop the preview.</span>
    <span style="color: #00ffff;">if</span> (mCamera != <span style="color: #7fffd4;">null</span>) {
        <span style="color: #ff7f24;">/*</span>
<span style="color: #ff7f24;">          Call stopPreview() to stop updating the preview surface.</span>
<span style="color: #ff7f24;">        */</span>
        mCamera.stopPreview();
    }
}

<span style="color: #ffa07a;">/**</span>
<span style="color: #ffa07a;">  * When this function returns, mCamera will be null.</span>
<span style="color: #ffa07a;">  */</span>
<span style="color: #00ffff;">private</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">stopPreviewAndFreeCamera</span>() {

    <span style="color: #00ffff;">if</span> (mCamera != <span style="color: #7fffd4;">null</span>) {
        <span style="color: #ff7f24;">/*</span>
<span style="color: #ff7f24;">          Call stopPreview() to stop updating the preview surface.</span>
<span style="color: #ff7f24;">        */</span>
        mCamera.stopPreview();

        <span style="color: #ff7f24;">/*</span>
<span style="color: #ff7f24;">          Important: Call release() to release the camera for use by other applications. </span>
<span style="color: #ff7f24;">          Applications should release the camera immediately in onPause() (and re-open() it in</span>
<span style="color: #ff7f24;">          onResume()).</span>
<span style="color: #ff7f24;">        */</span>
        mCamera.release();

        mCamera = <span style="color: #7fffd4;">null</span>;
    }
}
</pre>
</div>
</div>
</li></ul>
</div>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12">Building Apps with Graphics &amp; Animation</h2>
<div class="outline-text-2" id="text-12">
</div><div id="outline-container-sec-12-1" class="outline-3">
<h3 id="sec-12-1">Displaying Bitmaps Efficiently</h3>
<div class="outline-text-3" id="text-12-1">
</div><ul class="org-ul"><li>Loading Large Bitmaps Efficiently<br  /><ul class="org-ul"><li>Read Bitmap Dimensions and Type<br  /><div class="outline-text-5" id="text-12-1-1-1">
<p>
The BitmapFactory class provides several decoding methods
(decodeByteArray(), decodeFile(), decodeResource(), etc.) for creating
a Bitmap from various sources.
</p>

<p>
Each type of decode method has additional signatures that let you
specify decoding options via the BitmapFactory.Options class. Setting
the inJustDecodeBounds property to true while decoding avoids memory
allocation, returning null for the bitmap object but setting
outWidth, outHeight and outMimeType. This technique allows you to
read the dimensions and type of the image data prior to construction
(and memory allocation) of the bitmap.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #7fffd4;">BitmapFactory</span>.<span style="color: #98fb98;">Options</span> <span style="color: #eedd82;">options</span> = <span style="color: #00ffff;">new</span> <span style="color: #7fffd4;">BitmapFactory</span>.<span style="color: #98fb98;">Options</span>();
options.inJustDecodeBounds = <span style="color: #7fffd4;">true</span>;
BitmapFactory.decodeResource(getResources(), R.id.myimage, options);
<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">imageHeight</span> = options.outHeight;
<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">imageWidth</span> = options.outWidth;
<span style="color: #98fb98;">String</span> <span style="color: #eedd82;">imageType</span> = options.outMimeType;
</pre>
</div>
</div>
</li>
<li>Load a Scaled Down Version into Memory<br  /><div class="outline-text-5" id="text-12-1-1-2">
<p>
Here are some factors to consider:
</p>
<ul class="org-ul">
<li>Estimated memory usage of loading the full image in memory.
</li>
<li>Amount of memory you are willing to commit to loading this image given any other memory requirements of your application.
</li>
<li>Dimensions of the target ImageView or UI component that the image is to be loaded into.
</li>
<li>Screen size and density of the current device.
</li>
</ul>

<p>
Here’s a method to calculate a the sample size value based on a
target width and height:
</p>

<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">calculateInSampleSize</span>(
            <span style="color: #7fffd4;">BitmapFactory</span>.<span style="color: #98fb98;">Options</span> <span style="color: #eedd82;">options</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">reqWidth</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">reqHeight</span>) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Raw height and width of image</span>
    <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">height</span> = options.outHeight;
    <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">width</span> = options.outWidth;
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">inSampleSize</span> = 1;

    <span style="color: #00ffff;">if</span> (height &gt; reqHeight || width &gt; reqWidth) {

        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Calculate ratios of height and width to requested height and width</span>
        <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">heightRatio</span> = Math.round((<span style="color: #98fb98;">float</span>) height / (<span style="color: #98fb98;">float</span>) reqHeight);
        <span style="color: #00ffff;">final</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">widthRatio</span> = Math.round((<span style="color: #98fb98;">float</span>) width / (<span style="color: #98fb98;">float</span>) reqWidth);

        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Choose the smallest ratio as inSampleSize value, this will guarantee</span>
        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">a final image with both dimensions larger than or equal to the</span>
        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">requested height and width.</span>
        inSampleSize = heightRatio &lt; <span style="color: #98fb98;">widthRatio</span> ? heightRatio : widthRatio;
    }

    <span style="color: #00ffff;">return</span> inSampleSize;
}
</pre>
</div>

<p>
To use this method, first decode with inJustDecodeBounds set to true,
pass the options through and then decode again using the new
inSampleSize value and inJustDecodeBounds set to false:
</p>

<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #98fb98;">Bitmap</span> <span style="color: #87cefa;">decodeSampledBitmapFromResource</span>(<span style="color: #98fb98;">Resources</span> <span style="color: #eedd82;">res</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">resId</span>,
        <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">reqWidth</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">reqHeight</span>) {

    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">First decode with inJustDecodeBounds=true to check dimensions</span>
    <span style="color: #00ffff;">final</span> <span style="color: #7fffd4;">BitmapFactory</span>.<span style="color: #98fb98;">Options</span> <span style="color: #eedd82;">options</span> = <span style="color: #00ffff;">new</span> <span style="color: #7fffd4;">BitmapFactory</span>.<span style="color: #98fb98;">Options</span>();
    options.inJustDecodeBounds = <span style="color: #7fffd4;">true</span>;
    BitmapFactory.decodeResource(res, resId, options);

    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Calculate inSampleSize</span>
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Decode bitmap with inSampleSize set</span>
    options.inJustDecodeBounds = <span style="color: #7fffd4;">false</span>;
    <span style="color: #00ffff;">return</span> BitmapFactory.decodeResource(res, resId, options);
}
</pre>
</div>
</div>
</li></ul>
</li>

<li>Processing Bitmaps Off the UI Thread<br  /><div class="outline-text-4" id="text-12-1-2">
<p>
processing bitmaps in a background thread using AsyncTask
</p>
</div>
</li>

<li>Caching Bitmaps<br  /></li>


<li>Managing Bitmap Memory<br  /></li>

<li>Displaying Bitmaps in Your UI<br  /><div class="outline-text-4" id="text-12-1-5">
<p>
load multiple bitmaps into ViewPager and GridView components using a
background thread and bitmap cache
</p>
</div>
</li></ul>
</div>

<div id="outline-container-sec-12-2" class="outline-3">
<h3 id="sec-12-2">Displaying Graphics with OpenGL ES</h3>
</div>

<div id="outline-container-sec-12-3" class="outline-3">
<h3 id="sec-12-3">Adding Animations</h3>
<div class="outline-text-3" id="text-12-3">
<div class="org-src-container">

<pre class="src src-java"></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13">Activities</h2>
<div class="outline-text-2" id="text-13">
</div><div id="outline-container-sec-13-1" class="outline-3">
<h3 id="sec-13-1">Fragments</h3>
</div>
<div id="outline-container-sec-13-2" class="outline-3">
<h3 id="sec-13-2">Loaders</h3>
</div>
<div id="outline-container-sec-13-3" class="outline-3">
<h3 id="sec-13-3">Tasks and Back Stack</h3>
</div>
</div>
<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14">Providing Resources</h2>
<div class="outline-text-2" id="text-14">
<p>
<a href="http://developer.android.com/guide/topics/resources/providing-resources.html">http://developer.android.com/guide/topics/resources/providing-resources.html</a>
</p>
</div>
</div>
<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15">Handling Runtime Changes</h2>
<div class="outline-text-2" id="text-15">
<p>
<a href="http://developer.android.com/guide/topics/resources/runtime-changes.html">http://developer.android.com/guide/topics/resources/runtime-changes.html</a>
</p>
</div>
</div>

<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16">Localization</h2>
<div class="outline-text-2" id="text-16">
<p>
<a href="http://developer.android.com/guide/topics/resources/localization.html">http://developer.android.com/guide/topics/resources/localization.html</a>
</p>
</div>
</div>
<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17">Layouts</h2>
<div class="outline-text-2" id="text-17">
<p>
<a href="http://developer.android.com/guide/topics/ui/declaring-layout.html">http://developer.android.com/guide/topics/ui/declaring-layout.html</a>
</p>
</div>
</div>
<div id="outline-container-sec-18" class="outline-2">
<h2 id="sec-18">Styles and Themes</h2>
<div class="outline-text-2" id="text-18">
<p>
<a href="http://developer.android.com/guide/topics/ui/themes.html">http://developer.android.com/guide/topics/ui/themes.html</a>
</p>
</div>
</div>

<div id="outline-container-sec-19" class="outline-2">
<h2 id="sec-19">Data Storage</h2>
<div class="outline-text-2" id="text-19">
<p>
<a href="http://developer.android.com/guide/topics/data/index.html">http://developer.android.com/guide/topics/data/index.html</a>
</p>
</div>
<div id="outline-container-sec-19-1" class="outline-3">
<h3 id="sec-19-1">Storage Options</h3>
</div>
<div id="outline-container-sec-19-2" class="outline-3">
<h3 id="sec-19-2">Data Backup</h3>
</div>
<div id="outline-container-sec-19-3" class="outline-3">
<h3 id="sec-19-3">App Install Location</h3>
</div>
</div>
<div id="outline-container-sec-20" class="outline-2">
<h2 id="sec-20">Design</h2>
<div class="outline-text-2" id="text-20">
</div><div id="outline-container-sec-20-1" class="outline-3">
<h3 id="sec-20-1">Iconography</h3>
</div>
</div>
<div id="outline-container-sec-21" class="outline-2">
<h2 id="sec-21">Testing</h2>
<div class="outline-text-2" id="text-21">
<p>
<a href="http://developer.android.com/tools/testing/index.html">http://developer.android.com/tools/testing/index.html</a>
</p>
</div>
</div>
<div id="outline-container-sec-22" class="outline-2">
<h2 id="sec-22">C program using Android Toolchain</h2>
<div class="outline-text-2" id="text-22">
<p>
use <a href="./Files/agcc">agcc</a> 
</p>
<div class="org-src-container">

<pre class="src src-sh">agcc hello.c -o hello
adb shell push /data <span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">to the device</span>

arm-eabi-gcc -o hello hello.c -Wl,-rpath-link=$<span style="color: #eedd82;">Andoid_PATH</span>/out/target/product/generic/obj/lib 
-L=$<span style="color: #eedd82;">Andoid_PATH</span>/out/target/product/generic/obj/lib -nostdlib 
$<span style="color: #eedd82;">Andoid_PATH</span>/out/target/product/generic/obj/lib/crtbegin_dynamic.o -lc
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-23" class="outline-2">
<h2 id="sec-23">other component</h2>
<div class="outline-text-2" id="text-23">
</div><div id="outline-container-sec-23-1" class="outline-3">
<h3 id="sec-23-1">social</h3>
<div class="outline-text-3" id="text-23-1">
<p>
<a href="http://sharesdk.cn/">http://sharesdk.cn/</a>
</p>
</div>
</div>
</div>
<div id="outline-container-sec-24" class="outline-2">
<h2 id="sec-24">dd</h2>
<div class="outline-text-2" id="text-24">
<div class="org-src-container">

<pre class="src src-java"></pre>
</div>
</div>
</div>

<div id="outline-container-sec-25" class="outline-2">
<h2 id="sec-25">FAQ</h2>
<div class="outline-text-2" id="text-25">
</div><div id="outline-container-sec-25-1" class="outline-3">
<h3 id="sec-25-1">permission denied: ant</h3>
<div class="outline-text-3" id="text-25-1">
<p>
folder <code>adt-bundle-linux-x86-20130219/sdk/tools/ant</code> 
</p>
</div>
</div>
<div id="outline-container-sec-25-2" class="outline-3">
<h3 id="sec-25-2">Description Resource Path Location Type Unexpected namespace prefix "xmlns" found for tag RelativeLayout activity<sub>a</sub>.xml</h3>
<div class="outline-text-3" id="text-25-2">
<p>
The codes were running absolutely fine in the past but now they are showing these errors&#x2026;.
</p>

<p>
I found a very simple solution, doesn't require any code changes (Addition, edit or deletion).
</p>

<p>
Go to the Project Tab at the tab Click on the tab Select the
"Clean&#x2026;." from the list
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Shi Shougang</p>
<p class="date">Created: 2014-10-05 Sun 23:28</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.50.1 (<a href="http://orgmode.org">Org</a> mode 8.2.3a)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
